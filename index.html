<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N5 Flashcards - Free Japanese Study Tool</title>
    <meta name="description" content="Free JLPT N5 vocabulary flashcards. Practice Japanese nouns, adjectives with multiple study modes. Perfect for beginners learning Japanese.">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🇯🇵</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, rgba(34, 87, 122, 0.9) 0%, rgba(56, 142, 60, 0.9) 50%, rgba(27, 94, 32, 0.9) 100%), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><defs><pattern id="tree" x="0" y="0" width="200" height="400" patternUnits="userSpaceOnUse"><circle cx="100" cy="50" r="40" fill="%23388e3c" opacity="0.7"/><circle cx="70" cy="80" r="30" fill="%2343a047" opacity="0.6"/><circle cx="130" cy="75" r="35" fill="%234caf50" opacity="0.8"/><rect x="90" y="100" width="20" height="80" fill="%23795548"/><circle cx="150" cy="120" r="25" fill="%236a994e" opacity="0.7"/><circle cx="50" cy="130" r="20" fill="%23558b2f" opacity="0.6"/></pattern></defs><rect width="100%" height="100%" fill="url(%23tree)"/></svg>') center/cover;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"><g opacity="0.1"><path d="M100,500 Q150,200 200,500 T300,500" stroke="%23388e3c" stroke-width="8" fill="none"/><path d="M400,500 Q450,150 500,500 T600,500" stroke="%23388e3c" stroke-width="12" fill="none"/><circle cx="150" cy="180" r="60" fill="%234caf50"/><circle cx="450" cy="120" r="80" fill="%23558b2f"/><circle cx="180" cy="220" r="40" fill="%236a994e"/><circle cx="420" cy="160" r="50" fill="%2343a047"/><rect x="140" y="240" width="20" height="260" fill="%235d4037"/><rect x="440" y="200" width="25" height="300" fill="%23795548"/></g></svg>') center/cover;
            pointer-events: none;
            z-index: -1;
        }
        
        .flashcard-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(34, 87, 122, 0.3);
            padding: 40px;
            text-align: center;
            max-width: 600px;
            width: 100%;
            border: 1px solid rgba(56, 142, 60, 0.2);
        }
        
        .header {
            position: relative;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #1b5e20;
            font-size: 28px;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(34, 87, 122, 0.1);
            padding-left: 60px; /* Add space for hamburger menu on left */
        }

        /* Hamburger Menu Styles */
        .menu-container {
            position: absolute;
            top: -10px;
            left: 0; /* Move to left side */
        }

        .hamburger-menu {
            background: rgba(56, 142, 60, 0.1);
            border: 2px solid rgba(56, 142, 60, 0.3);
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .hamburger-menu:hover {
            background: rgba(56, 142, 60, 0.2);
            border-color: #388e3c;
            transform: scale(1.05);
        }

        .hamburger-icon {
            width: 18px;
            height: 16px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hamburger-icon span {
            display: block;
            width: 100%;
            height: 2px;
            background: #388e3c;
            transition: 0.3s ease;
            border-radius: 1px;
            transform-origin: center;
        }

        .hamburger-menu.active .hamburger-icon span:nth-child(1) {
            transform: translateY(7px) rotate(45deg);
        }

        .hamburger-menu.active .hamburger-icon span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-menu.active .hamburger-icon span:nth-child(3) {
            transform: translateY(-7px) rotate(-45deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0; /* Align dropdown with left side of hamburger */
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(34, 87, 122, 0.2);
            min-width: 220px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            margin-top: 10px;
            border: 2px solid rgba(56, 142, 60, 0.1);
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .filter-section {
            padding: 15px 0;
        }

        .filter-section-title {
            padding: 0 20px 15px;
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #f0f0f0;
            margin-bottom: 10px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s ease;
            color: #333;
        }

        .filter-option:hover {
            background: #f8f9fa;
        }

        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .toggle-switch input[type="checkbox"] {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ccc;
            transition: 0.3s;
            border-radius: 12px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input:checked + .toggle-slider {
            background: #2dd4bf;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .filter-option label {
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            flex: 1;
        }

        .word-count-badge {
            background: #388e3c;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .mode-selector {
            margin: 20px 0;
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            background: white;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            font-weight: 500;
        }
        
        .mode-btn.active {
            background: #388e3c;
            color: white;
            border-color: #388e3c;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(56, 142, 60, 0.3);
        }

        .mode-btn:hover:not(.active) {
            border-color: #388e3c;
            color: #388e3c;
        }
        
        .progress {
            background: #f0f0f0;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #43a047, #388e3c);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .card-info {
            display: flex;
            justify-content: space-between;
            color: #2e7d32;
            font-size: 14px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .flashcard {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(56, 142, 60, 0.2);
            border-radius: 15px;
            padding: 40px 20px;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            backdrop-filter: blur(5px);
        }
        
        .flashcard:hover {
            border-color: #388e3c;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(56, 142, 60, 0.2);
        }
        
        .flashcard.flipped {
            background: rgba(232, 245, 233, 0.9);
            border-color: #43a047;
            box-shadow: 0 8px 20px rgba(67, 160, 71, 0.2);
        }
        
        .japanese-word {
            font-size: 42px;
            font-weight: bold;
            color: #1b5e20;
            margin-bottom: 15px;
            font-family: 'Hiragino Sans', 'Yu Gothic', 'Meiryo', sans-serif;
            text-shadow: 0 2px 4px rgba(34, 87, 122, 0.1);
        }
        
        .reading {
            font-size: 22px;
            color: #388e3c;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .meaning {
            font-size: 26px;
            color: #2e7d32;
            font-weight: bold;
        }
        
        .prompt-text {
            font-size: 18px;
            color: #457a5a;
            margin-bottom: 20px;
            font-style: italic;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #43a047, #388e3c);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(56, 142, 60, 0.3);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
            border: 2px solid #e0e0e0;
        }

        .btn-secondary:hover {
            border-color: #388e3c;
            color: #388e3c;
            transform: translateY(-1px);
        }
        
        .stats {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
            border: 2px solid #e0e0e0;
        }
        
        .stats.show { 
            display: block; 
            border-color: #388e3c;
        }

        .stats h3 {
            color: #2e7d32; 
            margin-bottom: 15px;
        }

        /* Footer Actions - Now positioned below main content */
        .footer-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .footer-btn {
            display: inline-block;
            padding: 12px 24px;
            background: white;
            color: #333;
            text-decoration: none;
            border-radius: 25px;
            border: 2px solid #e0e0e0;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .footer-btn:hover {
            border-color: #388e3c;
            color: #388e3c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(56, 142, 60, 0.2);
        }

        .donate-btn {
            border-color: #ff6b6b !important;
            color: #ff6b6b !important;
        }

        .donate-btn:hover {
            background: #ff6b6b !important;
            color: white !important;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3) !important;
        }

        /* Feedback Modal */
        .modal-overlay {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000; 
            backdrop-filter: blur(3px);
        }

        .modal-content {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            max-width: 500px; 
            width: 90%; 
            box-shadow: 0 20px 40px rgba(34, 87, 122, 0.3);
            border: 2px solid rgba(56, 142, 60, 0.1);
        }

        .modal-header {
            color: #2e7d32; 
            margin-bottom: 20px; 
            text-align: center;
            font-size: 20px;
            font-weight: 600;
        }

        .form-label {
            display: block; 
            color: #2e7d32; 
            margin-bottom: 5px; 
            font-weight: 500;
            font-size: 14px;
        }

        .form-input, .form-textarea {
            width: 100%; 
            padding: 12px; 
            border: 2px solid rgba(56, 142, 60, 0.2); 
            border-radius: 8px; 
            font-size: 14px; 
            box-sizing: border-box; 
            outline: none;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            border-color: #388e3c;
        }

        .success-message {
            display: none; 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: #4caf50; 
            color: white; 
            padding: 15px 20px; 
            border-radius: 10px; 
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3); 
            z-index: 1001;
            font-weight: 500;
        }
            border: 2px solid #e0e0e0;
        }
        
        .stats.show { 
            display: block; 
            border-color: #667eea;
        }

        /* Footer Actions - Now positioned below main content */
        .footer-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .footer-btn {
            display: inline-block;
            padding: 12px 24px;
            background: white;
            color: #333;
            text-decoration: none;
            border-radius: 25px;
            border: 2px solid #e0e0e0;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .footer-btn:hover {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .donate-btn {
            border-color: #ff6b6b !important;
            color: #ff6b6b !important;
        }

        .donate-btn:hover {
            background: #ff6b6b !important;
            color: white !important;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3) !important;
        }

        /* Feedback Modal */
        .modal-overlay {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000; 
            backdrop-filter: blur(3px);
        }

        .modal-content {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            max-width: 500px; 
            width: 90%; 
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
            border: 2px solid rgba(102, 126, 234, 0.1);
        }

        .modal-header {
            color: #667eea; 
            margin-bottom: 20px; 
            text-align: center;
            font-size: 20px;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block; 
            color: #667eea; 
            margin-bottom: 5px; 
            font-weight: 500;
            font-size: 14px;
        }

        .form-input, .form-textarea {
            width: 100%; 
            padding: 12px; 
            border: 2px solid rgba(102, 126, 234, 0.2); 
            border-radius: 8px; 
            font-size: 14px; 
            box-sizing: border-box; 
            outline: none;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            border-color: #667eea;
        }

        .form-textarea {
            height: 100px; 
            resize: vertical; 
            font-family: inherit; 
            line-height: 1.4;
        }

        .form-buttons {
            text-align: center;
            margin-top: 20px;
        }

        .success-message {
            display: none; 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: #4caf50; 
            color: white; 
            padding: 15px 20px; 
            border-radius: 10px; 
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3); 
            z-index: 1001;
            font-weight: 500;
        }
            border: 2px solid #e0e0e0;
        }
        
        @media (max-width: 480px) {
            .flashcard-container { 
                padding: 20px; 
                margin: 10px;
            }
            
            .japanese-word { 
                font-size: 32px; 
            }
            
            .controls { 
                flex-direction: column; 
                align-items: center; 
            }
            
            .btn { 
                width: 100%; 
                max-width: 200px; 
            }

            .hamburger-menu {
                padding: 8px;
                width: 36px;
                height: 36px;
            }

            .dropdown-menu {
                min-width: 200px;
            }

            .footer-actions {
                flex-direction: column;
                align-items: center;
            }

            .footer-btn {
                width: 100%;
                max-width: 200px;
            }

            .header h1 {
                padding-left: 50px;
                padding-right: 0;
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="flashcard-container">
        <div class="header">
            <div class="menu-container">
                <div class="hamburger-menu" id="hamburgerMenu">
                    <div class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                <div class="dropdown-menu" id="dropdownMenu">
                    <div class="filter-section">
                        <div class="filter-section-title">Word Types</div>
                        <div class="filter-option" data-filter="all">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterAll" checked>
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterAll">All Words</label>
                            <span class="word-count-badge" id="allCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="noun">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterNouns">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterNouns">Nouns</label>
                            <span class="word-count-badge" id="nounCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="verb">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterVerbs">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterVerbs">Verbs</label>
                            <span class="word-count-badge" id="verbCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="i-adjective">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterIAdj">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterIAdj">い-Adjectives</label>
                            <span class="word-count-badge" id="iAdjCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="na-adjective">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterNaAdj">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterNaAdj">な-Adjectives</label>
                            <span class="word-count-badge" id="naAdjCount">0</span>
                        </div>
                    </div>
                </div>
            </div>
            <h1>JLPT N5 Comprehensive Study</h1>
            
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setMode('mixed')">🔀 Mixed Practice</button>
                <button class="mode-btn" onclick="setMode('jp-to-en')">🇯🇵→🇺🇸 JP to EN</button>
                <button class="mode-btn" onclick="setMode('en-to-jp')">🇺🇸→🇯🇵 EN to JP</button>
                <button class="mode-btn" onclick="setMode('reading')">📖 Reading Practice</button>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="card-info">
                <div id="cardCounter">Card 1 of 0</div>
                <div id="cardType">Mixed</div>
            </div>
        </div>
        
        <div class="flashcard" id="flashcard" onclick="flipCard()">
            <div class="prompt-text" id="promptText"></div>
            <div class="japanese-word" id="japaneseWord">Loading vocabulary...</div>
            <div class="reading" id="reading">Please wait...</div>
            <div class="meaning" id="meaning" style="display: none;">Loading...</div>
        </div>
        
        <div class="controls">
            <button class="btn btn-secondary" onclick="previousCard()">← Previous</button>
            <button class="btn btn-primary" onclick="flipCard()">Flip Card</button>
            <button class="btn btn-primary" onclick="nextCard()">Next →</button>
        </div>
        
        <div class="controls">
            <button class="btn btn-secondary" onclick="shuffleCards()">🔄 Shuffle</button>
            <button class="btn btn-secondary" onclick="resetProgress()">🔄 Reset</button>
            <button class="btn btn-secondary" onclick="toggleStats()">📊 Stats</button>
        </div>
        
        <div class="stats" id="stats">
            <h3 style="color: #667eea; margin-bottom: 15px;">Study Statistics</h3>
            <p><strong>Cards studied:</strong> <span id="cardsStudied">0</span></p>
            <p><strong>Times flipped:</strong> <span id="timesFlipped">0</span></p>
            <p><strong>Progress:</strong> <span id="progressPercent">0%</span></p>
            <p><strong>Current filter:</strong> <span id="currentFilter">All words</span></p>
        </div>

        <!-- Footer Actions - Now positioned below main content -->
        <div class="footer-actions">
            <button class="footer-btn" onclick="showFeedbackForm()">💬 Feedback</button>
            <button class="footer-btn donate-btn" onclick="showDonateInfo()">💝 Donate</button>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">💬 Share Your Feedback</div>
            
            <form name="jlpt-feedback" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" onsubmit="submitFeedback(event)">
                <input type="hidden" name="bot-field" />
                <input type="hidden" name="form-name" value="jlpt-feedback" />
                
                <div class="form-group">
                    <label class="form-label">Email (optional)</label>
                    <input type="email" name="email" class="form-input" placeholder="your@email.com">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Your feedback</label>
                    <textarea name="feedback" class="form-textarea" 
                              placeholder="What do you think about the app? Any suggestions or issues?" 
                              required></textarea>
                </div>
                
                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary" style="margin-right: 10px;">Send Feedback</button>
                    <button type="button" class="btn btn-secondary" onclick="hideFeedbackForm()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
        ✅ Thank you for your feedback!
    </div>

    <script>
        // Enhanced JLPT N5 vocabulary data with comprehensive coverage
        const allFlashcards = [
            // Family & People
            {"japanese": "姉", "reading": "あね", "meaning": "older sister", "type": "noun"},
            {"japanese": "兄", "reading": "あに", "meaning": "older brother", "type": "noun"},
            {"japanese": "父", "reading": "ちち", "meaning": "father", "type": "noun"},
            {"japanese": "母", "reading": "はは", "meaning": "mother", "type": "noun"},
            {"japanese": "兄弟", "reading": "きょうだい", "meaning": "siblings", "type": "noun"},
            {"japanese": "子供", "reading": "こども", "meaning": "child", "type": "noun"},
            {"japanese": "大人", "reading": "おとな", "meaning": "adult", "type": "noun"},
            {"japanese": "男", "reading": "おとこ", "meaning": "man", "type": "noun"},
            {"japanese": "女", "reading": "おんな", "meaning": "woman", "type": "noun"},
            {"japanese": "男の子", "reading": "おとこのこ", "meaning": "boy", "type": "noun"},
            {"japanese": "女の子", "reading": "おんなのこ", "meaning": "girl", "type": "noun"},
            {"japanese": "弟", "reading": "おとうと", "meaning": "younger brother", "type": "noun"},
            {"japanese": "妹", "reading": "いもうと", "meaning": "younger sister", "type": "noun"},
            {"japanese": "お母さん", "reading": "おかあさん", "meaning": "mother", "type": "noun"},
            {"japanese": "お父さん", "reading": "おとうさん", "meaning": "father", "type": "noun"},
            {"japanese": "お兄さん", "reading": "おにいさん", "meaning": "older brother", "type": "noun"},
            {"japanese": "お姉さん", "reading": "おねえさん", "meaning": "older sister", "type": "noun"},
            {"japanese": "外国人", "reading": "がいこくじん", "meaning": "foreigner", "type": "noun"},
            {"japanese": "皆さん", "reading": "みなさん", "meaning": "everyone", "type": "noun"},
            {"japanese": "みんな", "reading": "みんな", "meaning": "everyone", "type": "noun"},
            
            // Occupations & School
            {"japanese": "学生", "reading": "がくせい", "meaning": "student", "type": "noun"},
            {"japanese": "先生", "reading": "せんせい", "meaning": "teacher", "type": "noun"},
            {"japanese": "生徒", "reading": "せいと", "meaning": "pupil", "type": "noun"},
            {"japanese": "留学生", "reading": "りゅうがくせい", "meaning": "foreign student", "type": "noun"},
            {"japanese": "警官", "reading": "けいかん", "meaning": "policeman", "type": "noun"},
            {"japanese": "お巡りさん", "reading": "おまわりさん", "meaning": "police officer", "type": "noun"},
            
            // Body & Health
            {"japanese": "頭", "reading": "あたま", "meaning": "head", "type": "noun"},
            {"japanese": "手", "reading": "て", "meaning": "hand", "type": "noun"},
            {"japanese": "足", "reading": "あし", "meaning": "foot", "type": "noun"},
            {"japanese": "目", "reading": "め", "meaning": "eye", "type": "noun"},
            {"japanese": "耳", "reading": "みみ", "meaning": "ear", "type": "noun"},
            {"japanese": "鼻", "reading": "はな", "meaning": "nose", "type": "noun"},
            {"japanese": "口", "reading": "くち", "meaning": "mouth", "type": "noun"},
            {"japanese": "歯", "reading": "は", "meaning": "tooth", "type": "noun"},
            {"japanese": "体", "reading": "からだ", "meaning": "body", "type": "noun"},
            {"japanese": "お腹", "reading": "おなか", "meaning": "stomach", "type": "noun"},
            {"japanese": "病気", "reading": "びょうき", "meaning": "illness", "type": "noun"},
            {"japanese": "病院", "reading": "びょういん", "meaning": "hospital", "type": "noun"},
            {"japanese": "元気", "reading": "げんき", "meaning": "healthy", "type": "na-adjective"},
            {"japanese": "休み", "reading": "やすみ", "meaning": "rest", "type": "noun"},

            // Time & Dates
            {"japanese": "朝", "reading": "あさ", "meaning": "morning", "type": "noun"},
            {"japanese": "昼", "reading": "ひる", "meaning": "noon", "type": "noun"},
            {"japanese": "晩", "reading": "ばん", "meaning": "evening", "type": "noun"},
            {"japanese": "夜", "reading": "よる", "meaning": "night", "type": "noun"},
            {"japanese": "今", "reading": "いま", "meaning": "now", "type": "noun"},
            {"japanese": "今日", "reading": "きょう", "meaning": "today", "type": "noun"},
            {"japanese": "明日", "reading": "あした", "meaning": "tomorrow", "type": "noun"},
            {"japanese": "明後日", "reading": "あさって", "meaning": "day after tomorrow", "type": "noun"},
            {"japanese": "昨日", "reading": "きのう", "meaning": "yesterday", "type": "noun"},
            {"japanese": "一昨日", "reading": "おととい", "meaning": "day before yesterday", "type": "noun"},
            {"japanese": "一昨年", "reading": "おととし", "meaning": "two years ago", "type": "noun"},
            {"japanese": "毎日", "reading": "まいにち", "meaning": "every day", "type": "noun"},
            {"japanese": "毎朝", "reading": "まいあさ", "meaning": "every morning", "type": "noun"},
            {"japanese": "毎晩", "reading": "まいばん", "meaning": "every night", "type": "noun"},
            {"japanese": "毎週", "reading": "まいしゅう", "meaning": "every week", "type": "noun"},
            {"japanese": "毎月", "reading": "まいつき", "meaning": "every month", "type": "noun"},
            {"japanese": "毎年", "reading": "まいとし", "meaning": "every year", "type": "noun"},
            {"japanese": "今週", "reading": "こんしゅう", "meaning": "this week", "type": "noun"},
            {"japanese": "来週", "reading": "らいしゅう", "meaning": "next week", "type": "noun"},
            {"japanese": "今月", "reading": "こんげつ", "meaning": "this month", "type": "noun"},
            {"japanese": "来月", "reading": "らいげつ", "meaning": "next month", "type": "noun"},
            {"japanese": "来年", "reading": "らいねん", "meaning": "next year", "type": "noun"},
            {"japanese": "再来年", "reading": "さらいねん", "meaning": "year after next", "type": "noun"},

            // Days of the week
            {"japanese": "月曜日", "reading": "げつようび", "meaning": "Monday", "type": "noun"},
            {"japanese": "火曜日", "reading": "かようび", "meaning": "Tuesday", "type": "noun"},
            {"japanese": "水曜日", "reading": "すいようび", "meaning": "Wednesday", "type": "noun"},
            {"japanese": "木曜日", "reading": "もくようび", "meaning": "Thursday", "type": "noun"},
            {"japanese": "金曜日", "reading": "きんようび", "meaning": "Friday", "type": "noun"},
            {"japanese": "土曜日", "reading": "どようび", "meaning": "Saturday", "type": "noun"},
            {"japanese": "日曜日", "reading": "にちようび", "meaning": "Sunday", "type": "noun"},

            // Numbers
            {"japanese": "一", "reading": "いち", "meaning": "one", "type": "noun"},
            {"japanese": "二", "reading": "に", "meaning": "two", "type": "noun"},
            {"japanese": "三", "reading": "さん", "meaning": "three", "type": "noun"},
            {"japanese": "四", "reading": "し", "meaning": "four", "type": "noun"},
            {"japanese": "五", "reading": "ご", "meaning": "five", "type": "noun"},
            {"japanese": "六", "reading": "ろく", "meaning": "six", "type": "noun"},
            {"japanese": "七", "reading": "しち", "meaning": "seven", "type": "noun"},
            {"japanese": "八", "reading": "はち", "meaning": "eight", "type": "noun"},
            {"japanese": "九", "reading": "きゅう", "meaning": "nine", "type": "noun"},
            {"japanese": "十", "reading": "じゅう", "meaning": "ten", "type": "noun"},
            {"japanese": "百", "reading": "ひゃく", "meaning": "hundred", "type": "noun"},
            {"japanese": "千", "reading": "せん", "meaning": "thousand", "type": "noun"},
            {"japanese": "万", "reading": "まん", "meaning": "ten thousand", "type": "noun"},

            // Places
            {"japanese": "家", "reading": "いえ", "meaning": "house", "type": "noun"},
            {"japanese": "学校", "reading": "がっこう", "meaning": "school", "type": "noun"},
            {"japanese": "教室", "reading": "きょうしつ", "meaning": "classroom", "type": "noun"},
            {"japanese": "大学", "reading": "だいがく", "meaning": "university", "type": "noun"},
            {"japanese": "図書館", "reading": "としょかん", "meaning": "library", "type": "noun"},
            {"japanese": "公園", "reading": "こうえん", "meaning": "park", "type": "noun"},
            {"japanese": "銀行", "reading": "ぎんこう", "meaning": "bank", "type": "noun"},
            {"japanese": "郵便局", "reading": "ゆうびんきょく", "meaning": "post office", "type": "noun"},
            {"japanese": "店", "reading": "みせ", "meaning": "store", "type": "noun"},
            {"japanese": "駅", "reading": "えき", "meaning": "station", "type": "noun"},
            {"japanese": "空港", "reading": "くうこう", "meaning": "airport", "type": "noun"},
            {"japanese": "部屋", "reading": "へや", "meaning": "room", "type": "noun"},
            {"japanese": "台所", "reading": "だいどころ", "meaning": "kitchen", "type": "noun"},
            {"japanese": "町", "reading": "まち", "meaning": "town", "type": "noun"},

            // Transportation
            {"japanese": "車", "reading": "くるま", "meaning": "car", "type": "noun"},
            {"japanese": "電車", "reading": "でんしゃ", "meaning": "train", "type": "noun"},
            {"japanese": "バス", "reading": "ばす", "meaning": "bus", "type": "noun"},
            {"japanese": "飛行機", "reading": "ひこうき", "meaning": "airplane", "type": "noun"},
            {"japanese": "タクシー", "reading": "たくしー", "meaning": "taxi", "type": "noun"},
            {"japanese": "自転車", "reading": "じてんしゃ", "meaning": "bicycle", "type": "noun"},

            // Food & Drink
            {"japanese": "ご飯", "reading": "ごはん", "meaning": "rice/meal", "type": "noun"},
            {"japanese": "朝ご飯", "reading": "あさごはん", "meaning": "breakfast", "type": "noun"},
            {"japanese": "昼ご飯", "reading": "ひるごはん", "meaning": "lunch", "type": "noun"},
            {"japanese": "晩ご飯", "reading": "ばんごはん", "meaning": "dinner", "type": "noun"},
            {"japanese": "パン", "reading": "ぱん", "meaning": "bread", "type": "noun"},
            {"japanese": "卵", "reading": "たまご", "meaning": "egg", "type": "noun"},
            {"japanese": "肉", "reading": "にく", "meaning": "meat", "type": "noun"},
            {"japanese": "魚", "reading": "さかな", "meaning": "fish", "type": "noun"},
            {"japanese": "野菜", "reading": "やさい", "meaning": "vegetable", "type": "noun"},
            {"japanese": "果物", "reading": "くだもの", "meaning": "fruit", "type": "noun"},
            {"japanese": "水", "reading": "みず", "meaning": "water", "type": "noun"},
            {"japanese": "お茶", "reading": "おちゃ", "meaning": "tea", "type": "noun"},
            {"japanese": "コーヒー", "reading": "こーひー", "meaning": "coffee", "type": "noun"},
            {"japanese": "牛乳", "reading": "ぎゅうにゅう", "meaning": "milk", "type": "noun"},
            {"japanese": "ビール", "reading": "びーる", "meaning": "beer", "type": "noun"},

            // Nature & Weather
            {"japanese": "山", "reading": "やま", "meaning": "mountain", "type": "noun"},
            {"japanese": "川", "reading": "かわ", "meaning": "river", "type": "noun"},
            {"japanese": "海", "reading": "うみ", "meaning": "sea", "type": "noun"},
            {"japanese": "雪", "reading": "ゆき", "meaning": "snow", "type": "noun"},
            {"japanese": "雨", "reading": "あめ", "meaning": "rain", "type": "noun"},
            {"japanese": "風", "reading": "かぜ", "meaning": "wind", "type": "noun"},
            {"japanese": "空", "reading": "そら", "meaning": "sky", "type": "noun"},
            {"japanese": "天気", "reading": "てんき", "meaning": "weather", "type": "noun"},
            {"japanese": "春", "reading": "はる", "meaning": "spring", "type": "noun"},
            {"japanese": "夏", "reading": "なつ", "meaning": "summer", "type": "noun"},
            {"japanese": "秋", "reading": "あき", "meaning": "autumn", "type": "noun"},
            {"japanese": "冬", "reading": "ふゆ", "meaning": "winter", "type": "noun"},

            // Animals
            {"japanese": "犬", "reading": "いぬ", "meaning": "dog", "type": "noun"},
            {"japanese": "猫", "reading": "ねこ", "meaning": "cat", "type": "noun"},
            {"japanese": "鳥", "reading": "とり", "meaning": "bird", "type": "noun"},
            {"japanese": "動物", "reading": "どうぶつ", "meaning": "animal", "type": "noun"},

            // Colors
            {"japanese": "赤", "reading": "あか", "meaning": "red", "type": "noun"},
            {"japanese": "青", "reading": "あお", "meaning": "blue", "type": "noun"},
            {"japanese": "白", "reading": "しろ", "meaning": "white", "type": "noun"},
            {"japanese": "黒", "reading": "くろ", "meaning": "black", "type": "noun"},
            {"japanese": "黄色", "reading": "きいろ", "meaning": "yellow", "type": "noun"},
            {"japanese": "緑", "reading": "みどり", "meaning": "green", "type": "noun"},

            // Objects
            {"japanese": "本", "reading": "ほん", "meaning": "book", "type": "noun"},
            {"japanese": "ペン", "reading": "ぺん", "meaning": "pen", "type": "noun"},
            {"japanese": "鉛筆", "reading": "えんぴつ", "meaning": "pencil", "type": "noun"},
            {"japanese": "紙", "reading": "かみ", "meaning": "paper", "type": "noun"},
            {"japanese": "机", "reading": "つくえ", "meaning": "desk", "type": "noun"},
            {"japanese": "椅子", "reading": "いす", "meaning": "chair", "type": "noun"},
            {"japanese": "時計", "reading": "とけい", "meaning": "clock", "type": "noun"},
            {"japanese": "傘", "reading": "かさ", "meaning": "umbrella", "type": "noun"},
            {"japanese": "鞄", "reading": "かばん", "meaning": "bag", "type": "noun"},
            {"japanese": "靴", "reading": "くつ", "meaning": "shoes", "type": "noun"},
            {"japanese": "服", "reading": "ふく", "meaning": "clothes", "type": "noun"},
            {"japanese": "帽子", "reading": "ぼうし", "meaning": "hat", "type": "noun"},
            {"japanese": "眼鏡", "reading": "めがね", "meaning": "glasses", "type": "noun"},

            // Activities & Concepts
            {"japanese": "勉強", "reading": "べんきょう", "meaning": "study", "type": "noun"},
            {"japanese": "仕事", "reading": "しごと", "meaning": "work", "type": "noun"},
            {"japanese": "買い物", "reading": "かいもの", "meaning": "shopping", "type": "noun"},
            {"japanese": "料理", "reading": "りょうり", "meaning": "cooking", "type": "noun"},
            {"japanese": "掃除", "reading": "そうじ", "meaning": "cleaning", "type": "noun"},
            {"japanese": "洗濯", "reading": "せんたく", "meaning": "laundry", "type": "noun"},
            {"japanese": "旅行", "reading": "りょこう", "meaning": "travel", "type": "noun"},
            {"japanese": "散歩", "reading": "さんぽ", "meaning": "walk", "type": "noun"},
            {"japanese": "運動", "reading": "うんどう", "meaning": "exercise", "type": "noun"},
            {"japanese": "スポーツ", "reading": "すぽーつ", "meaning": "sports", "type": "noun"},
            {"japanese": "音楽", "reading": "おんがく", "meaning": "music", "type": "noun"},
            {"japanese": "映画", "reading": "えいが", "meaning": "movie", "type": "noun"},
            {"japanese": "写真", "reading": "しゃしん", "meaning": "photograph", "type": "noun"},

            // Essential Verbs - Fixed missing verbs issue
            {"japanese": "行く", "reading": "いく", "meaning": "to go", "type": "verb"},
            {"japanese": "来る", "reading": "くる", "meaning": "to come", "type": "verb"},
            {"japanese": "帰る", "reading": "かえる", "meaning": "to return", "type": "verb"},
            {"japanese": "食べる", "reading": "たべる", "meaning": "to eat", "type": "verb"},
            {"japanese": "飲む", "reading": "のむ", "meaning": "to drink", "type": "verb"},
            {"japanese": "見る", "reading": "みる", "meaning": "to see", "type": "verb"},
            {"japanese": "聞く", "reading": "きく", "meaning": "to listen", "type": "verb"},
            {"japanese": "読む", "reading": "よむ", "meaning": "to read", "type": "verb"},
            {"japanese": "書く", "reading": "かく", "meaning": "to write", "type": "verb"},
            {"japanese": "話す", "reading": "はなす", "meaning": "to speak", "type": "verb"},
            {"japanese": "寝る", "reading": "ねる", "meaning": "to sleep", "type": "verb"},
            {"japanese": "起きる", "reading": "おきる", "meaning": "to wake up", "type": "verb"},
            {"japanese": "立つ", "reading": "たつ", "meaning": "to stand", "type": "verb"},
            {"japanese": "座る", "reading": "すわる", "meaning": "to sit", "type": "verb"},
            {"japanese": "歩く", "reading": "あるく", "meaning": "to walk", "type": "verb"},
            {"japanese": "走る", "reading": "はしる", "meaning": "to run", "type": "verb"},
            {"japanese": "休む", "reading": "やすむ", "meaning": "to rest", "type": "verb"},
            {"japanese": "働く", "reading": "はたらく", "meaning": "to work", "type": "verb"},
            {"japanese": "勉強する", "reading": "べんきょうする", "meaning": "to study", "type": "verb"},
            {"japanese": "買う", "reading": "かう", "meaning": "to buy", "type": "verb"},
            {"japanese": "売る", "reading": "うる", "meaning": "to sell", "type": "verb"},
            {"japanese": "作る", "reading": "つくる", "meaning": "to make", "type": "verb"},
            {"japanese": "料理する", "reading": "りょうりする", "meaning": "to cook", "type": "verb"},
            {"japanese": "洗う", "reading": "あらう", "meaning": "to wash", "type": "verb"},
            {"japanese": "掃除する", "reading": "そうじする", "meaning": "to clean", "type": "verb"},
            {"japanese": "開く", "reading": "あく", "meaning": "to open", "type": "verb"},
            {"japanese": "閉める", "reading": "しめる", "meaning": "to close", "type": "verb"},
            {"japanese": "入る", "reading": "はいる", "meaning": "to enter", "type": "verb"},
            {"japanese": "出る", "reading": "でる", "meaning": "to exit", "type": "verb"},
            {"japanese": "待つ", "reading": "まつ", "meaning": "to wait", "type": "verb"},
            {"japanese": "泳ぐ", "reading": "およぐ", "meaning": "to swim", "type": "verb"},
            {"japanese": "踊る", "reading": "おどる", "meaning": "to dance", "type": "verb"},
            {"japanese": "歌う", "reading": "うたう", "meaning": "to sing", "type": "verb"},
            {"japanese": "弾く", "reading": "ひく", "meaning": "to play (instrument)", "type": "verb"},
            {"japanese": "撮る", "reading": "とる", "meaning": "to take (photo)", "type": "verb"},
            {"japanese": "会う", "reading": "あう", "meaning": "to meet", "type": "verb"},
            {"japanese": "教える", "reading": "おしえる", "meaning": "to teach", "type": "verb"},
            {"japanese": "習う", "reading": "ならう", "meaning": "to learn", "type": "verb"},
            {"japanese": "借りる", "reading": "かりる", "meaning": "to borrow", "type": "verb"},
            {"japanese": "貸す", "reading": "かす", "meaning": "to lend", "type": "verb"},
            {"japanese": "もらう", "reading": "もらう", "meaning": "to receive", "type": "verb"},
            {"japanese": "あげる", "reading": "あげる", "meaning": "to give", "type": "verb"},
            {"japanese": "手伝う", "reading": "てつだう", "meaning": "to help", "type": "verb"},
            {"japanese": "忘れる", "reading": "わすれる", "meaning": "to forget", "type": "verb"},
            {"japanese": "覚える", "reading": "おぼえる", "meaning": "to remember", "type": "verb"},
            {"japanese": "知る", "reading": "しる", "meaning": "to know", "type": "verb"},
            {"japanese": "分かる", "reading": "わかる", "meaning": "to understand", "type": "verb"},

            // i-adjectives - Fixed loading issues
            {"japanese": "新しい", "reading": "あたらしい", "meaning": "new", "type": "i-adjective"},
            {"japanese": "古い", "reading": "ふるい", "meaning": "old", "type": "i-adjective"},
            {"japanese": "大きい", "reading": "おおきい", "meaning": "big", "type": "i-adjective"},
            {"japanese": "小さい", "reading": "ちいさい", "meaning": "small", "type": "i-adjective"},
            {"japanese": "高い", "reading": "たかい", "meaning": "expensive/tall", "type": "i-adjective"},
            {"japanese": "安い", "reading": "やすい", "meaning": "cheap", "type": "i-adjective"},
            {"japanese": "いい", "reading": "いい", "meaning": "good", "type": "i-adjective"},
            {"japanese": "良い", "reading": "よい", "meaning": "good", "type": "i-adjective"},
            {"japanese": "悪い", "reading": "わるい", "meaning": "bad", "type": "i-adjective"},
            {"japanese": "美味しい", "reading": "おいしい", "meaning": "delicious", "type": "i-adjective"},
            {"japanese": "まずい", "reading": "まずい", "meaning": "bad tasting", "type": "i-adjective"},
            {"japanese": "暑い", "reading": "あつい", "meaning": "hot", "type": "i-adjective"},
            {"japanese": "寒い", "reading": "さむい", "meaning": "cold", "type": "i-adjective"},
            {"japanese": "暖かい", "reading": "あたたかい", "meaning": "warm", "type": "i-adjective"},
            {"japanese": "涼しい", "reading": "すずしい", "meaning": "cool", "type": "i-adjective"},
            {"japanese": "熱い", "reading": "あつい", "meaning": "hot (to touch)", "type": "i-adjective"},
            {"japanese": "冷たい", "reading": "つめたい", "meaning": "cold (to touch)", "type": "i-adjective"},
            {"japanese": "明るい", "reading": "あかるい", "meaning": "bright", "type": "i-adjective"},
            {"japanese": "暗い", "reading": "くらい", "meaning": "dark", "type": "i-adjective"},
            {"japanese": "重い", "reading": "おもい", "meaning": "heavy", "type": "i-adjective"},
            {"japanese": "軽い", "reading": "かるい", "meaning": "light", "type": "i-adjective"},
            {"japanese": "強い", "reading": "つよい", "meaning": "strong", "type": "i-adjective"},
            {"japanese": "弱い", "reading": "よわい", "meaning": "weak", "type": "i-adjective"},
            {"japanese": "長い", "reading": "ながい", "meaning": "long", "type": "i-adjective"},
            {"japanese": "短い", "reading": "みじかい", "meaning": "short", "type": "i-adjective"},
            {"japanese": "広い", "reading": "ひろい", "meaning": "wide", "type": "i-adjective"},
            {"japanese": "狭い", "reading": "せまい", "meaning": "narrow", "type": "i-adjective"},
            {"japanese": "多い", "reading": "おおい", "meaning": "many", "type": "i-adjective"},
            {"japanese": "少ない", "reading": "すくない", "meaning": "few", "type": "i-adjective"},
            {"japanese": "早い", "reading": "はやい", "meaning": "early", "type": "i-adjective"},
            {"japanese": "遅い", "reading": "おそい", "meaning": "late", "type": "i-adjective"},
            {"japanese": "速い", "reading": "はやい", "meaning": "fast", "type": "i-adjective"},
            {"japanese": "遠い", "reading": "とおい", "meaning": "far", "type": "i-adjective"},
            {"japanese": "近い", "reading": "ちかい", "meaning": "near", "type": "i-adjective"},
            {"japanese": "低い", "reading": "ひくい", "meaning": "low", "type": "i-adjective"},
            {"japanese": "難しい", "reading": "むずかしい", "meaning": "difficult", "type": "i-adjective"},
            {"japanese": "易しい", "reading": "やさしい", "meaning": "easy", "type": "i-adjective"},
            {"japanese": "優しい", "reading": "やさしい", "meaning": "kind", "type": "i-adjective"},
            {"japanese": "面白い", "reading": "おもしろい", "meaning": "interesting", "type": "i-adjective"},
            {"japanese": "つまらない", "reading": "つまらない", "meaning": "boring", "type": "i-adjective"},
            {"japanese": "楽しい", "reading": "たのしい", "meaning": "fun", "type": "i-adjective"},
            {"japanese": "忙しい", "reading": "いそがしい", "meaning": "busy", "type": "i-adjective"},
            {"japanese": "痛い", "reading": "いたい", "meaning": "painful", "type": "i-adjective"},
            {"japanese": "眠い", "reading": "ねむい", "meaning": "sleepy", "type": "i-adjective"},
            {"japanese": "怖い", "reading": "こわい", "meaning": "scary", "type": "i-adjective"},
            {"japanese": "危ない", "reading": "あぶない", "meaning": "dangerous", "type": "i-adjective"},
            {"japanese": "うるさい", "reading": "うるさい", "meaning": "noisy", "type": "i-adjective"},
            {"japanese": "静かな", "reading": "しずかな", "meaning": "quiet", "type": "i-adjective"},
            {"japanese": "若い", "reading": "わかい", "meaning": "young", "type": "i-adjective"},
            {"japanese": "赤い", "reading": "あかい", "meaning": "red", "type": "i-adjective"},
            {"japanese": "青い", "reading": "あおい", "meaning": "blue", "type": "i-adjective"},
            {"japanese": "白い", "reading": "しろい", "meaning": "white", "type": "i-adjective"},
            {"japanese": "黒い", "reading": "くろい", "meaning": "black", "type": "i-adjective"},
            {"japanese": "黄色い", "reading": "きいろい", "meaning": "yellow", "type": "i-adjective"},
            {"japanese": "可愛い", "reading": "かわいい", "meaning": "cute", "type": "i-adjective"},
            {"japanese": "美しい", "reading": "うつくしい", "meaning": "beautiful", "type": "i-adjective"},
            {"japanese": "汚い", "reading": "きたない", "meaning": "dirty", "type": "i-adjective"},
            {"japanese": "甘い", "reading": "あまい", "meaning": "sweet", "type": "i-adjective"},
            {"japanese": "辛い", "reading": "からい", "meaning": "spicy", "type": "i-adjective"},
            {"japanese": "酸っぱい", "reading": "すっぱい", "meaning": "sour", "type": "i-adjective"},
            {"japanese": "苦い", "reading": "にがい", "meaning": "bitter", "type": "i-adjective"},

            // na-adjectives - Fixed loading issues
            {"japanese": "有名", "reading": "ゆうめい", "meaning": "famous", "type": "na-adjective"},
            {"japanese": "便利", "reading": "べんり", "meaning": "convenient", "type": "na-adjective"},
            {"japanese": "不便", "reading": "ふべん", "meaning": "inconvenient", "type": "na-adjective"},
            {"japanese": "綺麗", "reading": "きれい", "meaning": "beautiful/clean", "type": "na-adjective"},
            {"japanese": "静か", "reading": "しずか", "meaning": "quiet", "type": "na-adjective"},
            {"japanese": "賑やか", "reading": "にぎやか", "meaning": "lively", "type": "na-adjective"},
            {"japanese": "親切", "reading": "しんせつ", "meaning": "kind", "type": "na-adjective"},
            {"japanese": "丁寧", "reading": "ていねい", "meaning": "polite", "type": "na-adjective"},
            {"japanese": "簡単", "reading": "かんたん", "meaning": "simple", "type": "na-adjective"},
            {"japanese": "大変", "reading": "たいへん", "meaning": "tough/hard", "type": "na-adjective"},
            {"japanese": "大丈夫", "reading": "だいじょうぶ", "meaning": "OK/alright", "type": "na-adjective"},
            {"japanese": "安全", "reading": "あんぜん", "meaning": "safe", "type": "na-adjective"},
            {"japanese": "危険", "reading": "きけん", "meaning": "dangerous", "type": "na-adjective"},
            {"japanese": "自由", "reading": "じゆう", "meaning": "free", "type": "na-adjective"},
            {"japanese": "大切", "reading": "たいせつ", "meaning": "important", "type": "na-adjective"},
            {"japanese": "必要", "reading": "ひつよう", "meaning": "necessary", "type": "na-adjective"},
            {"japanese": "特別", "reading": "とくべつ", "meaning": "special", "type": "na-adjective"},
            {"japanese": "普通", "reading": "ふつう", "meaning": "normal", "type": "na-adjective"},
            {"japanese": "同じ", "reading": "おなじ", "meaning": "same", "type": "na-adjective"},
            {"japanese": "好き", "reading": "すき", "meaning": "like", "type": "na-adjective"},
            {"japanese": "嫌い", "reading": "きらい", "meaning": "dislike", "type": "na-adjective"},
            {"japanese": "上手", "reading": "じょうず", "meaning": "skillful", "type": "na-adjective"},
            {"japanese": "下手", "reading": "へた", "meaning": "unskillful", "type": "na-adjective"},
            {"japanese": "得意", "reading": "とくい", "meaning": "good at", "type": "na-adjective"},
            {"japanese": "苦手", "reading": "にがて", "meaning": "bad at", "type": "na-adjective"},
            {"japanese": "暇", "reading": "ひま", "meaning": "free time", "type": "na-adjective"},
            {"japanese": "楽", "reading": "らく", "meaning": "easy/comfortable", "type": "na-adjective"},
            {"japanese": "新鮮", "reading": "しんせん", "meaning": "fresh", "type": "na-adjective"},
            {"japanese": "完璧", "reading": "かんぺき", "meaning": "perfect", "type": "na-adjective"},
            {"japanese": "最高", "reading": "さいこう", "meaning": "the best", "type": "na-adjective"},
            {"japanese": "幸せ", "reading": "しあわせ", "meaning": "happy", "type": "na-adjective"},
            {"japanese": "心配", "reading": "しんぱい", "meaning": "worried", "type": "na-adjective"},
            {"japanese": "安心", "reading": "あんしん", "meaning": "relieved", "type": "na-adjective"},
            {"japanese": "残念", "reading": "ざんねん", "meaning": "disappointing", "type": "na-adjective"},
            {"japanese": "立派", "reading": "りっぱ", "meaning": "splendid", "type": "na-adjective"},
            {"japanese": "真面目", "reading": "まじめ", "meaning": "serious", "type": "na-adjective"}
        ];

        let currentMode = 'mixed';
        let currentCardIndex = 0;
        let isFlipped = false;
        let cardsStudied = new Set();
        let flipCount = 0;
        let currentDeck = [...allFlashcards];
        let activeFilters = new Set(['all']);
        let keyboardListenerActive = true;

        // Initialize word counts by type
        const wordCounts = {
            all: 0,
            noun: 0,
            verb: 0,
            'i-adjective': 0,
            'na-adjective': 0
        };

        function calculateWordCounts() {
            wordCounts.all = allFlashcards.length;
            wordCounts.noun = allFlashcards.filter(card => card.type === 'noun').length;
            wordCounts.verb = allFlashcards.filter(card => card.type === 'verb').length;
            wordCounts['i-adjective'] = allFlashcards.filter(card => card.type === 'i-adjective').length;
            wordCounts['na-adjective'] = allFlashcards.filter(card => card.type === 'na-adjective').length;
            
            // Update count badges
            document.getElementById('allCount').textContent = wordCounts.all;
            document.getElementById('nounCount').textContent = wordCounts.noun;
            document.getElementById('verbCount').textContent = wordCounts.verb;
            document.getElementById('iAdjCount').textContent = wordCounts['i-adjective'];
            document.getElementById('naAdjCount').textContent = wordCounts['na-adjective'];
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateCard();
            updateStats();
        }

        function applyFilters() {
            let filtered = allFlashcards;

            // Apply type filters
            if (!activeFilters.has('all')) {
                filtered = filtered.filter(item => activeFilters.has(item.type));
            }

            currentDeck = filtered;
            currentCardIndex = 0;
            cardsStudied.clear();
            updateCard();
            updateStats();
        }

        // Hamburger menu functionality
        function initializeHamburgerMenu() {
            const hamburgerMenu = document.getElementById('hamburgerMenu');
            const dropdownMenu = document.getElementById('dropdownMenu');

            // Toggle dropdown
            hamburgerMenu.addEventListener('click', (e) => {
                e.stopPropagation();
                hamburgerMenu.classList.toggle('active');
                dropdownMenu.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!dropdownMenu.contains(e.target) && !hamburgerMenu.contains(e.target)) {
                    hamburgerMenu.classList.remove('active');
                    dropdownMenu.classList.remove('active');
                }
            });

            // Filter toggle switches - handle both the toggle container and checkbox
            const filterOptions = document.querySelectorAll('.filter-option');
            filterOptions.forEach(option => {
                const checkbox = option.querySelector('input[type="checkbox"]');
                const toggleSwitch = option.querySelector('.toggle-switch');
                
                // Add click handler to the entire option
                option.addEventListener('click', (e) => {
                    // Prevent double-triggering if clicking directly on checkbox
                    if (e.target !== checkbox) {
                        e.preventDefault();
                        checkbox.checked = !checkbox.checked;
                        handleFilterChange({ target: checkbox });
                    }
                });
                
                // Add direct change handler to checkbox
                checkbox.addEventListener('change', handleFilterChange);
            });
        }

        function handleFilterChange(e) {
            const checkbox = e.target;
            const filterId = checkbox.id;
            const isChecked = checkbox.checked;

            if (filterId === 'filterAll') {
                if (isChecked) {
                    // Uncheck all other filters
                    document.querySelectorAll('#dropdownMenu input[type="checkbox"]:not(#filterAll)').forEach(cb => {
                        cb.checked = false;
                    });
                    activeFilters = new Set(['all']);
                } else {
                    activeFilters.delete('all');
                }
            } else {
                // Uncheck "All Words" when selecting specific filters
                document.getElementById('filterAll').checked = false;
                activeFilters.delete('all');

                const filterMap = {
                    'filterNouns': 'noun',
                    'filterVerbs': 'verb',
                    'filterIAdj': 'i-adjective',
                    'filterNaAdj': 'na-adjective'
                };

                if (isChecked) {
                    activeFilters.add(filterMap[filterId]);
                } else {
                    activeFilters.delete(filterMap[filterId]);
                }

                // If no filters selected, check "All Words"
                if (activeFilters.size === 0) {
                    document.getElementById('filterAll').checked = true;
                    activeFilters.add('all');
                }
            }

            applyFilters();
        }

        function updateCard() {
            if (currentDeck.length === 0) {
                document.getElementById('japaneseWord').textContent = 'No cards match filters';
                document.getElementById('reading').textContent = 'Please select different filters';
                return;
            }

            const card = currentDeck[currentCardIndex];
            const promptText = document.getElementById('promptText');
            const japaneseWord = document.getElementById('japaneseWord');
            const reading = document.getElementById('reading');
            const meaning = document.getElementById('meaning');

            // Reset display
            promptText.textContent = '';
            meaning.style.display = 'none';
            japaneseWord.style.fontSize = '42px';
            isFlipped = false;
            document.getElementById('flashcard').classList.remove('flipped');

            switch (currentMode) {
                case 'mixed':
                    japaneseWord.textContent = card.japanese;
                    reading.textContent = card.reading;
                    meaning.textContent = card.meaning;
                    break;
                case 'jp-to-en':
                    japaneseWord.textContent = card.japanese;
                    reading.textContent = '';
                    meaning.textContent = card.meaning + ' (' + card.reading + ')';
                    break;
                case 'en-to-jp':
                    promptText.textContent = 'What is the Japanese for:';
                    japaneseWord.textContent = card.meaning;
                    japaneseWord.style.fontSize = '28px';
                    reading.textContent = '';
                    meaning.textContent = card.japanese + ' (' + card.reading + ')';
                    break;
                case 'reading':
                    promptText.textContent = 'What does this reading mean?';
                    japaneseWord.textContent = card.reading;
                    reading.textContent = '';
                    meaning.textContent = card.japanese + ' - ' + card.meaning;
                    break;
            }

            // Update progress
            document.getElementById('cardCounter').textContent = 
                `Card ${currentCardIndex + 1} of ${currentDeck.length}`;
            document.getElementById('progressBar').style.width = 
                ((currentCardIndex + 1) / currentDeck.length) * 100 + '%';

            cardsStudied.add(currentCardIndex);
        }

        function flipCard() {
            const meaning = document.getElementById('meaning');
            const flashcard = document.getElementById('flashcard');
            
            if (isFlipped) {
                meaning.style.display = 'none';
                flashcard.classList.remove('flipped');
            } else {
                meaning.style.display = 'block';
                flashcard.classList.add('flipped');
                flipCount++;
            }
            isFlipped = !isFlipped;
            updateStats();
        }

        function nextCard() {
            if (currentCardIndex < currentDeck.length - 1) {
                currentCardIndex++;
                updateCard();
            }
        }

        function previousCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateCard();
            }
        }

        function shuffleCards() {
            currentDeck = shuffleArray(currentDeck);
            currentCardIndex = 0;
            cardsStudied.clear();
            updateCard();
            updateStats();
        }

        function resetProgress() {
            currentCardIndex = 0;
            cardsStudied.clear();
            flipCount = 0;
            updateCard();
            updateStats();
        }

        function toggleStats() {
            document.getElementById('stats').classList.toggle('show');
        }

        function updateStats() {
            document.getElementById('cardsStudied').textContent = cardsStudied.size;
            document.getElementById('timesFlipped').textContent = flipCount;
            document.getElementById('progressPercent').textContent = 
                currentDeck.length > 0 ? Math.round((cardsStudied.size / currentDeck.length) * 100) + '%' : '0%';
            
            // Update current filter display
            let filterText = 'All words';
            if (!activeFilters.has('all')) {
                const filterNames = {
                    'noun': 'Nouns',
                    'verb': 'Verbs',
                    'i-adjective': 'い-Adjectives',
                    'na-adjective': 'な-Adjectives'
                };
                const activeFilterNames = Array.from(activeFilters).map(f => filterNames[f]).join(', ');
                filterText = activeFilterNames;
            }
            document.getElementById('currentFilter').textContent = filterText;
        }

        // Keyboard shortcuts
        function handleKeyboard(event) {
            if (!keyboardListenerActive) return;
            
            const activeElement = document.activeElement;
            const isFormElement = activeElement && (
                activeElement.tagName === 'TEXTAREA' || 
                activeElement.tagName === 'INPUT' || 
                activeElement.contentEditable === 'true' ||
                activeElement.isContentEditable
            );
            
            if (isFormElement) return;

            switch(event.key) {
                case ' ':
                case 'Enter':
                    event.preventDefault();
                    flipCard();
                    break;
                case 'ArrowLeft':
                    event.preventDefault();
                    previousCard();
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    nextCard();
                    break;
            }
        }

        document.addEventListener('keydown', handleKeyboard);

        // Feedback System Functions
        function showFeedbackForm() {
            document.getElementById('feedbackModal').style.display = 'block';
            keyboardListenerActive = false;
        }

        function hideFeedbackForm() {
            document.getElementById('feedbackModal').style.display = 'none';
            keyboardListenerActive = true;
        }

        function showDonateInfo() {
            alert('Thank you for considering a donation! This helps keep the app free and ad-free for everyone. Donation feature coming soon - for now, please share the app with others who are studying Japanese!');
        }

        function submitFeedback(event) {
            event.preventDefault();
            
            // Show success message
            document.getElementById('successMessage').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 3000);
            
            // Hide modal and re-enable keyboard
            hideFeedbackForm();
            
            // Submit the form
            const form = event.target;
            fetch('/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: new URLSearchParams(new FormData(form)).toString()
            }).catch(error => console.log('Feedback submission error:', error));
            
            // Reset form
            form.reset();
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('feedbackModal');
            if (event.target === modal) {
                hideFeedbackForm();
            }
        });

        // Local Storage for Progress Persistence
        function saveProgress() {
            const progress = {
                currentCardIndex,
                cardsStudied: Array.from(cardsStudied),
                flipCount,
                currentMode,
                activeFilters: Array.from(activeFilters),
                lastStudied: new Date().toISOString()
            };
            localStorage.setItem('jlptN5Progress', JSON.stringify(progress));
        }

        function loadProgress() {
            try {
                const saved = localStorage.getItem('jlptN5Progress');
                if (saved) {
                    const progress = JSON.parse(saved);
                    currentCardIndex = progress.currentCardIndex || 0;
                    cardsStudied = new Set(progress.cardsStudied || []);
                    flipCount = progress.flipCount || 0;
                    currentMode = progress.currentMode || 'mixed';
                    activeFilters = new Set(progress.activeFilters || ['all']);
                    
                    // Update mode button
                    document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
                    const targetBtn = document.querySelector(`[onclick*="${currentMode}"]`);
                    if (targetBtn) targetBtn.classList.add('active');
                    
                    // Update filter checkboxes
                    updateFilterCheckboxes();
                    
                    return true;
                }
            } catch (error) {
                console.log('Could not load progress:', error);
            }
            return false;
        }

        function updateFilterCheckboxes() {
            // Reset all checkboxes
            document.querySelectorAll('#dropdownMenu input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            
            if (activeFilters.has('all')) {
                document.getElementById('filterAll').checked = true;
            } else {
                const filterMap = {
                    'noun': 'filterNouns',
                    'verb': 'filterVerbs',
                    'i-adjective': 'filterIAdj',
                    'na-adjective': 'filterNaAdj'
                };
                
                activeFilters.forEach(filter => {
                    const checkboxId = filterMap[filter];
                    if (checkboxId) {
                        document.getElementById(checkboxId).checked = true;
                    }
                });
            }
        }

        // Enhanced update functions with offline save
        function updateCardWithSave() {
            updateCard();
            saveProgress();
        }

        function flipCardWithSave() {
            flipCard();
            saveProgress();
        }

        function nextCardWithSave() {
            nextCard();
            saveProgress();
        }

        function previousCardWithSave() {
            previousCard();
            saveProgress();
        }

        function setModeWithSave(mode) {
            setMode(mode);
            saveProgress();
        }

        // Service Worker for Offline Support
        if ('serviceWorker' in navigator) {
            const swContent = `
                const CACHE_NAME = 'jlpt-n5-flashcards-v2';
                const urlsToCache = [
                    '/',
                    '/index.html'
                ];

                self.addEventListener('install', function(event) {
                    event.waitUntil(
                        caches.open(CACHE_NAME)
                            .then(function(cache) {
                                return cache.addAll(urlsToCache);
                            })
                    );
                });

                self.addEventListener('fetch', function(event) {
                    event.respondWith(
                        caches.match(event.request)
                            .then(function(response) {
                                return response || fetch(event.request);
                            }
                        )
                    );
                });

                self.addEventListener('activate', function(event) {
                    event.waitUntil(
                        caches.keys().then(function(cacheNames) {
                            return Promise.all(
                                cacheNames.map(function(cacheName) {
                                    if (cacheName !== CACHE_NAME) {
                                        return caches.delete(cacheName);
                                    }
                                })
                            );
                        })
                    );
                });
            `;

            const blob = new Blob([swContent], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(blob);
            
            navigator.serviceWorker.register(swUrl)
                .then(registration => {
                    console.log('Service Worker registered for offline support');
                })
                .catch(error => {
                    console.log('Service Worker registration failed:', error);
                });
        }

        // Initialize the application
        function initializeApp() {
            calculateWordCounts();
            initializeHamburgerMenu();
            
            // Try to load previous progress
            const progressLoaded = loadProgress();
            
            if (!progressLoaded) {
                // First time - shuffle and apply default filters
                shuffleCards();
            } else {
                // Apply loaded filters
                applyFilters();
            }
            
            updateStats();
            console.log('JLPT N5 Flashcards loaded successfully with', allFlashcards.length, 'cards!');
            console.log('Word counts:', wordCounts);
        }

        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
