<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N5 Flashcards - Free Japanese Study Tool</title>
    <meta name="description" content="Free JLPT N5 vocabulary flashcards. Practice Japanese nouns, adjectives with multiple study modes. Perfect for beginners learning Japanese.">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ‡¯ğŸ‡µ</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, rgba(34, 87, 122, 0.9) 0%, rgba(56, 142, 60, 0.9) 50%, rgba(27, 94, 32, 0.9) 100%), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><defs><pattern id="tree" x="0" y="0" width="200" height="400" patternUnits="userSpaceOnUse"><circle cx="100" cy="50" r="40" fill="%23388e3c" opacity="0.7"/><circle cx="70" cy="80" r="30" fill="%2343a047" opacity="0.6"/><circle cx="130" cy="75" r="35" fill="%234caf50" opacity="0.8"/><rect x="90" y="100" width="20" height="80" fill="%23795548"/><circle cx="150" cy="120" r="25" fill="%236a994e" opacity="0.7"/><circle cx="50" cy="130" r="20" fill="%23558b2f" opacity="0.6"/></pattern></defs><rect width="100%" height="100%" fill="url(%23tree)"/></svg>') center/cover;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"><g opacity="0.1"><path d="M100,500 Q150,200 200,500 T300,500" stroke="%23388e3c" stroke-width="8" fill="none"/><path d="M400,500 Q450,150 500,500 T600,500" stroke="%23388e3c" stroke-width="12" fill="none"/><circle cx="150" cy="180" r="60" fill="%234caf50"/><circle cx="450" cy="120" r="80" fill="%23558b2f"/><circle cx="180" cy="220" r="40" fill="%236a994e"/><circle cx="420" cy="160" r="50" fill="%2343a047"/><rect x="140" y="240" width="20" height="260" fill="%235d4037"/><rect x="440" y="200" width="25" height="300" fill="%23795548"/></g></svg>') center/cover;
            pointer-events: none;
            z-index: -1;
        }
        
        .flashcard-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(34, 87, 122, 0.3);
            padding: 40px;
            text-align: center;
            max-width: 600px;
            width: 100%;
            border: 1px solid rgba(56, 142, 60, 0.2);
        }
        
        .header {
            position: relative;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #1b5e20;
            font-size: 28px;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(34, 87, 122, 0.1);
            padding-left: 60px; /* Add space for hamburger menu on left */
        }

        /* Hamburger Menu Styles */
        .menu-container {
            position: absolute;
            top: -10px;
            left: 0; /* Move to left side */
        }

        .hamburger-menu {
            background: rgba(56, 142, 60, 0.1);
            border: 2px solid rgba(56, 142, 60, 0.3);
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .hamburger-menu:hover {
            background: rgba(56, 142, 60, 0.2);
            border-color: #388e3c;
            transform: scale(1.05);
        }

        .hamburger-icon {
            width: 18px;
            height: 16px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hamburger-icon span {
            display: block;
            width: 100%;
            height: 2px;
            background: #388e3c;
            transition: 0.3s ease;
            border-radius: 1px;
            transform-origin: center;
        }

        .hamburger-menu.active .hamburger-icon span:nth-child(1) {
            transform: translateY(7px) rotate(45deg);
        }

        .hamburger-menu.active .hamburger-icon span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-menu.active .hamburger-icon span:nth-child(3) {
            transform: translateY(-7px) rotate(-45deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0; /* Align dropdown with left side of hamburger */
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(34, 87, 122, 0.2);
            min-width: 220px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            margin-top: 10px;
            border: 2px solid rgba(56, 142, 60, 0.1);
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .filter-section {
            padding: 15px 0;
        }

        .filter-section-title {
            padding: 0 20px 15px;
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #f0f0f0;
            margin-bottom: 10px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s ease;
            color: #333;
        }

        .filter-option:hover {
            background: #f8f9fa;
        }

        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .toggle-switch input[type="checkbox"] {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ccc;
            transition: 0.3s;
            border-radius: 12px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input:checked + .toggle-slider {
            background: #2dd4bf;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .filter-option label {
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            flex: 1;
        }

        .word-count-badge {
            background: #388e3c;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .mode-selector {
            margin: 20px 0;
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            background: white;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            font-weight: 500;
        }
        
        .mode-btn.active {
            background: #388e3c;
            color: white;
            border-color: #388e3c;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(56, 142, 60, 0.3);
        }

        .mode-btn:hover:not(.active) {
            border-color: #388e3c;
            color: #388e3c;
        }
        
        .progress {
            background: #f0f0f0;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #43a047, #388e3c);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .card-info {
            display: flex;
            justify-content: space-between;
            color: #2e7d32;
            font-size: 14px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .flashcard {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(56, 142, 60, 0.2);
            border-radius: 15px;
            padding: 40px 20px;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            backdrop-filter: blur(5px);
        }
        
        .flashcard:hover {
            border-color: #388e3c;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(56, 142, 60, 0.2);
        }
        
        .flashcard.flipped {
            background: rgba(232, 245, 233, 0.9);
            border-color: #43a047;
            box-shadow: 0 8px 20px rgba(67, 160, 71, 0.2);
        }
        
        .japanese-word {
            font-size: 42px;
            font-weight: bold;
            color: #1b5e20;
            margin-bottom: 15px;
            font-family: 'Hiragino Sans', 'Yu Gothic', 'Meiryo', sans-serif;
            text-shadow: 0 2px 4px rgba(34, 87, 122, 0.1);
        }
        
        .reading {
            font-size: 22px;
            color: #388e3c;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .meaning {
            font-size: 26px;
            color: #2e7d32;
            font-weight: bold;
        }
        
        .prompt-text {
            font-size: 18px;
            color: #457a5a;
            margin-bottom: 20px;
            font-style: italic;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #43a047, #388e3c);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(56, 142, 60, 0.3);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
            border: 2px solid #e0e0e0;
        }

        .btn-secondary:hover {
            border-color: #388e3c;
            color: #388e3c;
            transform: translateY(-1px);
        }
        
        .stats {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
            border: 2px solid #e0e0e0;
        }
        
        .stats.show { 
            display: block; 
            border-color: #388e3c;
        }

        .stats h3 {
            color: #2e7d32; 
            margin-bottom: 15px;
        }

        /* Footer Actions - Now positioned below main content */
        .footer-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .footer-btn {
            display: inline-block;
            padding: 12px 24px;
            background: white;
            color: #333;
            text-decoration: none;
            border-radius: 25px;
            border: 2px solid #e0e0e0;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .footer-btn:hover {
            border-color: #388e3c;
            color: #388e3c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(56, 142, 60, 0.2);
        }

        .donate-btn {
            border-color: #ff6b6b !important;
            color: #ff6b6b !important;
        }

        .donate-btn:hover {
            background: #ff6b6b !important;
            color: white !important;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3) !important;
        }

        /* Feedback Modal */
        .modal-overlay {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000; 
            backdrop-filter: blur(3px);
        }

        .modal-content {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            max-width: 500px; 
            width: 90%; 
            box-shadow: 0 20px 40px rgba(34, 87, 122, 0.3);
            border: 2px solid rgba(56, 142, 60, 0.1);
        }

        .modal-header {
            color: #2e7d32; 
            margin-bottom: 20px; 
            text-align: center;
            font-size: 20px;
            font-weight: 600;
        }

        .form-label {
            display: block; 
            color: #2e7d32; 
            margin-bottom: 5px; 
            font-weight: 500;
            font-size: 14px;
        }

        .form-input, .form-textarea {
            width: 100%; 
            padding: 12px; 
            border: 2px solid rgba(56, 142, 60, 0.2); 
            border-radius: 8px; 
            font-size: 14px; 
            box-sizing: border-box; 
            outline: none;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            border-color: #388e3c;
        }

        .success-message {
            display: none; 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: #4caf50; 
            color: white; 
            padding: 15px 20px; 
            border-radius: 10px; 
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3); 
            z-index: 1001;
            font-weight: 500;
        }
            border: 2px solid #e0e0e0;
        }
        
        .stats.show { 
            display: block; 
            border-color: #667eea;
        }

        /* Footer Actions - Now positioned below main content */
        .footer-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .footer-btn {
            display: inline-block;
            padding: 12px 24px;
            background: white;
            color: #333;
            text-decoration: none;
            border-radius: 25px;
            border: 2px solid #e0e0e0;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .footer-btn:hover {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .donate-btn {
            border-color: #ff6b6b !important;
            color: #ff6b6b !important;
        }

        .donate-btn:hover {
            background: #ff6b6b !important;
            color: white !important;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3) !important;
        }

        /* Feedback Modal */
        .modal-overlay {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000; 
            backdrop-filter: blur(3px);
        }

        .modal-content {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            max-width: 500px; 
            width: 90%; 
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
            border: 2px solid rgba(102, 126, 234, 0.1);
        }

        .modal-header {
            color: #667eea; 
            margin-bottom: 20px; 
            text-align: center;
            font-size: 20px;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block; 
            color: #667eea; 
            margin-bottom: 5px; 
            font-weight: 500;
            font-size: 14px;
        }

        .form-input, .form-textarea {
            width: 100%; 
            padding: 12px; 
            border: 2px solid rgba(102, 126, 234, 0.2); 
            border-radius: 8px; 
            font-size: 14px; 
            box-sizing: border-box; 
            outline: none;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            border-color: #667eea;
        }

        .form-textarea {
            height: 100px; 
            resize: vertical; 
            font-family: inherit; 
            line-height: 1.4;
        }

        .form-buttons {
            text-align: center;
            margin-top: 20px;
        }

        .success-message {
            display: none; 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: #4caf50; 
            color: white; 
            padding: 15px 20px; 
            border-radius: 10px; 
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3); 
            z-index: 1001;
            font-weight: 500;
        }
            border: 2px solid #e0e0e0;
        }
        
        @media (max-width: 480px) {
            .flashcard-container { 
                padding: 20px; 
                margin: 10px;
            }
            
            .japanese-word { 
                font-size: 32px; 
            }
            
            .controls { 
                flex-direction: column; 
                align-items: center; 
            }
            
            .btn { 
                width: 100%; 
                max-width: 200px; 
            }

            .hamburger-menu {
                padding: 8px;
                width: 36px;
                height: 36px;
            }

            .dropdown-menu {
                min-width: 200px;
            }

            .footer-actions {
                flex-direction: column;
                align-items: center;
            }

            .footer-btn {
                width: 100%;
                max-width: 200px;
            }

            .header h1 {
                padding-left: 50px;
                padding-right: 0;
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="flashcard-container">
        <div class="header">
            <div class="menu-container">
                <div class="hamburger-menu" id="hamburgerMenu">
                    <div class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                <div class="dropdown-menu" id="dropdownMenu">
                    <div class="filter-section">
                        <div class="filter-section-title">Word Types</div>
                        <div class="filter-option" data-filter="all">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterAll" checked>
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterAll">All Words</label>
                            <span class="word-count-badge" id="allCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="noun">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterNouns">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterNouns">Nouns</label>
                            <span class="word-count-badge" id="nounCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="verb">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterVerbs">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterVerbs">Verbs</label>
                            <span class="word-count-badge" id="verbCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="i-adjective">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterIAdj">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterIAdj">ã„-Adjectives</label>
                            <span class="word-count-badge" id="iAdjCount">0</span>
                        </div>
                        <div class="filter-option" data-filter="na-adjective">
                            <div class="toggle-switch">
                                <input type="checkbox" id="filterNaAdj">
                                <span class="toggle-slider"></span>
                            </div>
                            <label for="filterNaAdj">ãª-Adjectives</label>
                            <span class="word-count-badge" id="naAdjCount">0</span>
                        </div>
                    </div>
                </div>
            </div>
            <h1>JLPT N5 Comprehensive Study</h1>
            
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setMode('mixed')">ğŸ”€ Mixed Practice</button>
                <button class="mode-btn" onclick="setMode('jp-to-en')">ğŸ‡¯ğŸ‡µâ†’ğŸ‡ºğŸ‡¸ JP to EN</button>
                <button class="mode-btn" onclick="setMode('en-to-jp')">ğŸ‡ºğŸ‡¸â†’ğŸ‡¯ğŸ‡µ EN to JP</button>
                <button class="mode-btn" onclick="setMode('reading')">ğŸ“– Reading Practice</button>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="card-info">
                <div id="cardCounter">Card 1 of 0</div>
                <div id="cardType">Mixed</div>
            </div>
        </div>
        
        <div class="flashcard" id="flashcard" onclick="flipCard()">
            <div class="prompt-text" id="promptText"></div>
            <div class="japanese-word" id="japaneseWord">Loading vocabulary...</div>
            <div class="reading" id="reading">Please wait...</div>
            <div class="meaning" id="meaning" style="display: none;">Loading...</div>
        </div>
        
        <div class="controls">
            <button class="btn btn-secondary" onclick="previousCard()">â† Previous</button>
            <button class="btn btn-primary" onclick="flipCard()">Flip Card</button>
            <button class="btn btn-primary" onclick="nextCard()">Next â†’</button>
        </div>
        
        <div class="controls">
            <button class="btn btn-secondary" onclick="shuffleCards()">ğŸ”„ Shuffle</button>
            <button class="btn btn-secondary" onclick="resetProgress()">ğŸ”„ Reset</button>
            <button class="btn btn-secondary" onclick="toggleStats()">ğŸ“Š Stats</button>
        </div>
        
        <div class="stats" id="stats">
            <h3 style="color: #667eea; margin-bottom: 15px;">Study Statistics</h3>
            <p><strong>Cards studied:</strong> <span id="cardsStudied">0</span></p>
            <p><strong>Times flipped:</strong> <span id="timesFlipped">0</span></p>
            <p><strong>Progress:</strong> <span id="progressPercent">0%</span></p>
            <p><strong>Current filter:</strong> <span id="currentFilter">All words</span></p>
        </div>

        <!-- Footer Actions - Now positioned below main content -->
        <div class="footer-actions">
            <button class="footer-btn" onclick="showFeedbackForm()">ğŸ’¬ Feedback</button>
            <button class="footer-btn donate-btn" onclick="showDonateInfo()">ğŸ’ Donate</button>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">ğŸ’¬ Share Your Feedback</div>
            
            <form name="jlpt-feedback" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" onsubmit="submitFeedback(event)">
                <input type="hidden" name="bot-field" />
                <input type="hidden" name="form-name" value="jlpt-feedback" />
                
                <div class="form-group">
                    <label class="form-label">Email (optional)</label>
                    <input type="email" name="email" class="form-input" placeholder="your@email.com">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Your feedback</label>
                    <textarea name="feedback" class="form-textarea" 
                              placeholder="What do you think about the app? Any suggestions or issues?" 
                              required></textarea>
                </div>
                
                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary" style="margin-right: 10px;">Send Feedback</button>
                    <button type="button" class="btn btn-secondary" onclick="hideFeedbackForm()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
        âœ… Thank you for your feedback!
    </div>

    <script>
        // Enhanced JLPT N5 vocabulary data with comprehensive coverage
        const allFlashcards = [
            // Family & People
            {"japanese": "å§‰", "reading": "ã‚ã­", "meaning": "older sister", "type": "noun"},
            {"japanese": "å…„", "reading": "ã‚ã«", "meaning": "older brother", "type": "noun"},
            {"japanese": "çˆ¶", "reading": "ã¡ã¡", "meaning": "father", "type": "noun"},
            {"japanese": "æ¯", "reading": "ã¯ã¯", "meaning": "mother", "type": "noun"},
            {"japanese": "å…„å¼Ÿ", "reading": "ãã‚‡ã†ã ã„", "meaning": "siblings", "type": "noun"},
            {"japanese": "å­ä¾›", "reading": "ã“ã©ã‚‚", "meaning": "child", "type": "noun"},
            {"japanese": "å¤§äºº", "reading": "ãŠã¨ãª", "meaning": "adult", "type": "noun"},
            {"japanese": "ç”·", "reading": "ãŠã¨ã“", "meaning": "man", "type": "noun"},
            {"japanese": "å¥³", "reading": "ãŠã‚“ãª", "meaning": "woman", "type": "noun"},
            {"japanese": "ç”·ã®å­", "reading": "ãŠã¨ã“ã®ã“", "meaning": "boy", "type": "noun"},
            {"japanese": "å¥³ã®å­", "reading": "ãŠã‚“ãªã®ã“", "meaning": "girl", "type": "noun"},
            {"japanese": "å¼Ÿ", "reading": "ãŠã¨ã†ã¨", "meaning": "younger brother", "type": "noun"},
            {"japanese": "å¦¹", "reading": "ã„ã‚‚ã†ã¨", "meaning": "younger sister", "type": "noun"},
            {"japanese": "ãŠæ¯ã•ã‚“", "reading": "ãŠã‹ã‚ã•ã‚“", "meaning": "mother", "type": "noun"},
            {"japanese": "ãŠçˆ¶ã•ã‚“", "reading": "ãŠã¨ã†ã•ã‚“", "meaning": "father", "type": "noun"},
            {"japanese": "ãŠå…„ã•ã‚“", "reading": "ãŠã«ã„ã•ã‚“", "meaning": "older brother", "type": "noun"},
            {"japanese": "ãŠå§‰ã•ã‚“", "reading": "ãŠã­ãˆã•ã‚“", "meaning": "older sister", "type": "noun"},
            {"japanese": "å¤–å›½äºº", "reading": "ãŒã„ã“ãã˜ã‚“", "meaning": "foreigner", "type": "noun"},
            {"japanese": "çš†ã•ã‚“", "reading": "ã¿ãªã•ã‚“", "meaning": "everyone", "type": "noun"},
            {"japanese": "ã¿ã‚“ãª", "reading": "ã¿ã‚“ãª", "meaning": "everyone", "type": "noun"},
            
            // Occupations & School
            {"japanese": "å­¦ç”Ÿ", "reading": "ãŒãã›ã„", "meaning": "student", "type": "noun"},
            {"japanese": "å…ˆç”Ÿ", "reading": "ã›ã‚“ã›ã„", "meaning": "teacher", "type": "noun"},
            {"japanese": "ç”Ÿå¾’", "reading": "ã›ã„ã¨", "meaning": "pupil", "type": "noun"},
            {"japanese": "ç•™å­¦ç”Ÿ", "reading": "ã‚Šã‚…ã†ãŒãã›ã„", "meaning": "foreign student", "type": "noun"},
            {"japanese": "è­¦å®˜", "reading": "ã‘ã„ã‹ã‚“", "meaning": "policeman", "type": "noun"},
            {"japanese": "ãŠå·¡ã‚Šã•ã‚“", "reading": "ãŠã¾ã‚ã‚Šã•ã‚“", "meaning": "police officer", "type": "noun"},
            
            // Body & Health
            {"japanese": "é ­", "reading": "ã‚ãŸã¾", "meaning": "head", "type": "noun"},
            {"japanese": "æ‰‹", "reading": "ã¦", "meaning": "hand", "type": "noun"},
            {"japanese": "è¶³", "reading": "ã‚ã—", "meaning": "foot", "type": "noun"},
            {"japanese": "ç›®", "reading": "ã‚", "meaning": "eye", "type": "noun"},
            {"japanese": "è€³", "reading": "ã¿ã¿", "meaning": "ear", "type": "noun"},
            {"japanese": "é¼»", "reading": "ã¯ãª", "meaning": "nose", "type": "noun"},
            {"japanese": "å£", "reading": "ãã¡", "meaning": "mouth", "type": "noun"},
            {"japanese": "æ­¯", "reading": "ã¯", "meaning": "tooth", "type": "noun"},
            {"japanese": "ä½“", "reading": "ã‹ã‚‰ã ", "meaning": "body", "type": "noun"},
            {"japanese": "ãŠè…¹", "reading": "ãŠãªã‹", "meaning": "stomach", "type": "noun"},
            {"japanese": "ç—…æ°—", "reading": "ã³ã‚‡ã†ã", "meaning": "illness", "type": "noun"},
            {"japanese": "ç—…é™¢", "reading": "ã³ã‚‡ã†ã„ã‚“", "meaning": "hospital", "type": "noun"},
            {"japanese": "å…ƒæ°—", "reading": "ã’ã‚“ã", "meaning": "healthy", "type": "na-adjective"},
            {"japanese": "ä¼‘ã¿", "reading": "ã‚„ã™ã¿", "meaning": "rest", "type": "noun"},

            // Time & Dates
            {"japanese": "æœ", "reading": "ã‚ã•", "meaning": "morning", "type": "noun"},
            {"japanese": "æ˜¼", "reading": "ã²ã‚‹", "meaning": "noon", "type": "noun"},
            {"japanese": "æ™©", "reading": "ã°ã‚“", "meaning": "evening", "type": "noun"},
            {"japanese": "å¤œ", "reading": "ã‚ˆã‚‹", "meaning": "night", "type": "noun"},
            {"japanese": "ä»Š", "reading": "ã„ã¾", "meaning": "now", "type": "noun"},
            {"japanese": "ä»Šæ—¥", "reading": "ãã‚‡ã†", "meaning": "today", "type": "noun"},
            {"japanese": "æ˜æ—¥", "reading": "ã‚ã—ãŸ", "meaning": "tomorrow", "type": "noun"},
            {"japanese": "æ˜å¾Œæ—¥", "reading": "ã‚ã•ã£ã¦", "meaning": "day after tomorrow", "type": "noun"},
            {"japanese": "æ˜¨æ—¥", "reading": "ãã®ã†", "meaning": "yesterday", "type": "noun"},
            {"japanese": "ä¸€æ˜¨æ—¥", "reading": "ãŠã¨ã¨ã„", "meaning": "day before yesterday", "type": "noun"},
            {"japanese": "ä¸€æ˜¨å¹´", "reading": "ãŠã¨ã¨ã—", "meaning": "two years ago", "type": "noun"},
            {"japanese": "æ¯æ—¥", "reading": "ã¾ã„ã«ã¡", "meaning": "every day", "type": "noun"},
            {"japanese": "æ¯æœ", "reading": "ã¾ã„ã‚ã•", "meaning": "every morning", "type": "noun"},
            {"japanese": "æ¯æ™©", "reading": "ã¾ã„ã°ã‚“", "meaning": "every night", "type": "noun"},
            {"japanese": "æ¯é€±", "reading": "ã¾ã„ã—ã‚…ã†", "meaning": "every week", "type": "noun"},
            {"japanese": "æ¯æœˆ", "reading": "ã¾ã„ã¤ã", "meaning": "every month", "type": "noun"},
            {"japanese": "æ¯å¹´", "reading": "ã¾ã„ã¨ã—", "meaning": "every year", "type": "noun"},
            {"japanese": "ä»Šé€±", "reading": "ã“ã‚“ã—ã‚…ã†", "meaning": "this week", "type": "noun"},
            {"japanese": "æ¥é€±", "reading": "ã‚‰ã„ã—ã‚…ã†", "meaning": "next week", "type": "noun"},
            {"japanese": "ä»Šæœˆ", "reading": "ã“ã‚“ã’ã¤", "meaning": "this month", "type": "noun"},
            {"japanese": "æ¥æœˆ", "reading": "ã‚‰ã„ã’ã¤", "meaning": "next month", "type": "noun"},
            {"japanese": "æ¥å¹´", "reading": "ã‚‰ã„ã­ã‚“", "meaning": "next year", "type": "noun"},
            {"japanese": "å†æ¥å¹´", "reading": "ã•ã‚‰ã„ã­ã‚“", "meaning": "year after next", "type": "noun"},

            // Days of the week
            {"japanese": "æœˆæ›œæ—¥", "reading": "ã’ã¤ã‚ˆã†ã³", "meaning": "Monday", "type": "noun"},
            {"japanese": "ç«æ›œæ—¥", "reading": "ã‹ã‚ˆã†ã³", "meaning": "Tuesday", "type": "noun"},
            {"japanese": "æ°´æ›œæ—¥", "reading": "ã™ã„ã‚ˆã†ã³", "meaning": "Wednesday", "type": "noun"},
            {"japanese": "æœ¨æ›œæ—¥", "reading": "ã‚‚ãã‚ˆã†ã³", "meaning": "Thursday", "type": "noun"},
            {"japanese": "é‡‘æ›œæ—¥", "reading": "ãã‚“ã‚ˆã†ã³", "meaning": "Friday", "type": "noun"},
            {"japanese": "åœŸæ›œæ—¥", "reading": "ã©ã‚ˆã†ã³", "meaning": "Saturday", "type": "noun"},
            {"japanese": "æ—¥æ›œæ—¥", "reading": "ã«ã¡ã‚ˆã†ã³", "meaning": "Sunday", "type": "noun"},

            // Numbers
            {"japanese": "ä¸€", "reading": "ã„ã¡", "meaning": "one", "type": "noun"},
            {"japanese": "äºŒ", "reading": "ã«", "meaning": "two", "type": "noun"},
            {"japanese": "ä¸‰", "reading": "ã•ã‚“", "meaning": "three", "type": "noun"},
            {"japanese": "å››", "reading": "ã—", "meaning": "four", "type": "noun"},
            {"japanese": "äº”", "reading": "ã”", "meaning": "five", "type": "noun"},
            {"japanese": "å…­", "reading": "ã‚ã", "meaning": "six", "type": "noun"},
            {"japanese": "ä¸ƒ", "reading": "ã—ã¡", "meaning": "seven", "type": "noun"},
            {"japanese": "å…«", "reading": "ã¯ã¡", "meaning": "eight", "type": "noun"},
            {"japanese": "ä¹", "reading": "ãã‚…ã†", "meaning": "nine", "type": "noun"},
            {"japanese": "å", "reading": "ã˜ã‚…ã†", "meaning": "ten", "type": "noun"},
            {"japanese": "ç™¾", "reading": "ã²ã‚ƒã", "meaning": "hundred", "type": "noun"},
            {"japanese": "åƒ", "reading": "ã›ã‚“", "meaning": "thousand", "type": "noun"},
            {"japanese": "ä¸‡", "reading": "ã¾ã‚“", "meaning": "ten thousand", "type": "noun"},

            // Places
            {"japanese": "å®¶", "reading": "ã„ãˆ", "meaning": "house", "type": "noun"},
            {"japanese": "å­¦æ ¡", "reading": "ãŒã£ã“ã†", "meaning": "school", "type": "noun"},
            {"japanese": "æ•™å®¤", "reading": "ãã‚‡ã†ã—ã¤", "meaning": "classroom", "type": "noun"},
            {"japanese": "å¤§å­¦", "reading": "ã ã„ãŒã", "meaning": "university", "type": "noun"},
            {"japanese": "å›³æ›¸é¤¨", "reading": "ã¨ã—ã‚‡ã‹ã‚“", "meaning": "library", "type": "noun"},
            {"japanese": "å…¬åœ’", "reading": "ã“ã†ãˆã‚“", "meaning": "park", "type": "noun"},
            {"japanese": "éŠ€è¡Œ", "reading": "ãã‚“ã“ã†", "meaning": "bank", "type": "noun"},
            {"japanese": "éƒµä¾¿å±€", "reading": "ã‚†ã†ã³ã‚“ãã‚‡ã", "meaning": "post office", "type": "noun"},
            {"japanese": "åº—", "reading": "ã¿ã›", "meaning": "store", "type": "noun"},
            {"japanese": "é§…", "reading": "ãˆã", "meaning": "station", "type": "noun"},
            {"japanese": "ç©ºæ¸¯", "reading": "ãã†ã“ã†", "meaning": "airport", "type": "noun"},
            {"japanese": "éƒ¨å±‹", "reading": "ã¸ã‚„", "meaning": "room", "type": "noun"},
            {"japanese": "å°æ‰€", "reading": "ã ã„ã©ã“ã‚", "meaning": "kitchen", "type": "noun"},
            {"japanese": "ç”º", "reading": "ã¾ã¡", "meaning": "town", "type": "noun"},

            // Transportation
            {"japanese": "è»Š", "reading": "ãã‚‹ã¾", "meaning": "car", "type": "noun"},
            {"japanese": "é›»è»Š", "reading": "ã§ã‚“ã—ã‚ƒ", "meaning": "train", "type": "noun"},
            {"japanese": "ãƒã‚¹", "reading": "ã°ã™", "meaning": "bus", "type": "noun"},
            {"japanese": "é£›è¡Œæ©Ÿ", "reading": "ã²ã“ã†ã", "meaning": "airplane", "type": "noun"},
            {"japanese": "ã‚¿ã‚¯ã‚·ãƒ¼", "reading": "ãŸãã—ãƒ¼", "meaning": "taxi", "type": "noun"},
            {"japanese": "è‡ªè»¢è»Š", "reading": "ã˜ã¦ã‚“ã—ã‚ƒ", "meaning": "bicycle", "type": "noun"},

            // Food & Drink
            {"japanese": "ã”é£¯", "reading": "ã”ã¯ã‚“", "meaning": "rice/meal", "type": "noun"},
            {"japanese": "æœã”é£¯", "reading": "ã‚ã•ã”ã¯ã‚“", "meaning": "breakfast", "type": "noun"},
            {"japanese": "æ˜¼ã”é£¯", "reading": "ã²ã‚‹ã”ã¯ã‚“", "meaning": "lunch", "type": "noun"},
            {"japanese": "æ™©ã”é£¯", "reading": "ã°ã‚“ã”ã¯ã‚“", "meaning": "dinner", "type": "noun"},
            {"japanese": "ãƒ‘ãƒ³", "reading": "ã±ã‚“", "meaning": "bread", "type": "noun"},
            {"japanese": "åµ", "reading": "ãŸã¾ã”", "meaning": "egg", "type": "noun"},
            {"japanese": "è‚‰", "reading": "ã«ã", "meaning": "meat", "type": "noun"},
            {"japanese": "é­š", "reading": "ã•ã‹ãª", "meaning": "fish", "type": "noun"},
            {"japanese": "é‡èœ", "reading": "ã‚„ã•ã„", "meaning": "vegetable", "type": "noun"},
            {"japanese": "æœç‰©", "reading": "ãã ã‚‚ã®", "meaning": "fruit", "type": "noun"},
            {"japanese": "æ°´", "reading": "ã¿ãš", "meaning": "water", "type": "noun"},
            {"japanese": "ãŠèŒ¶", "reading": "ãŠã¡ã‚ƒ", "meaning": "tea", "type": "noun"},
            {"japanese": "ã‚³ãƒ¼ãƒ’ãƒ¼", "reading": "ã“ãƒ¼ã²ãƒ¼", "meaning": "coffee", "type": "noun"},
            {"japanese": "ç‰›ä¹³", "reading": "ãã‚…ã†ã«ã‚…ã†", "meaning": "milk", "type": "noun"},
            {"japanese": "ãƒ“ãƒ¼ãƒ«", "reading": "ã³ãƒ¼ã‚‹", "meaning": "beer", "type": "noun"},

            // Nature & Weather
            {"japanese": "å±±", "reading": "ã‚„ã¾", "meaning": "mountain", "type": "noun"},
            {"japanese": "å·", "reading": "ã‹ã‚", "meaning": "river", "type": "noun"},
            {"japanese": "æµ·", "reading": "ã†ã¿", "meaning": "sea", "type": "noun"},
            {"japanese": "é›ª", "reading": "ã‚†ã", "meaning": "snow", "type": "noun"},
            {"japanese": "é›¨", "reading": "ã‚ã‚", "meaning": "rain", "type": "noun"},
            {"japanese": "é¢¨", "reading": "ã‹ãœ", "meaning": "wind", "type": "noun"},
            {"japanese": "ç©º", "reading": "ãã‚‰", "meaning": "sky", "type": "noun"},
            {"japanese": "å¤©æ°—", "reading": "ã¦ã‚“ã", "meaning": "weather", "type": "noun"},
            {"japanese": "æ˜¥", "reading": "ã¯ã‚‹", "meaning": "spring", "type": "noun"},
            {"japanese": "å¤", "reading": "ãªã¤", "meaning": "summer", "type": "noun"},
            {"japanese": "ç§‹", "reading": "ã‚ã", "meaning": "autumn", "type": "noun"},
            {"japanese": "å†¬", "reading": "ãµã‚†", "meaning": "winter", "type": "noun"},

            // Animals
            {"japanese": "çŠ¬", "reading": "ã„ã¬", "meaning": "dog", "type": "noun"},
            {"japanese": "çŒ«", "reading": "ã­ã“", "meaning": "cat", "type": "noun"},
            {"japanese": "é³¥", "reading": "ã¨ã‚Š", "meaning": "bird", "type": "noun"},
            {"japanese": "å‹•ç‰©", "reading": "ã©ã†ã¶ã¤", "meaning": "animal", "type": "noun"},

            // Colors
            {"japanese": "èµ¤", "reading": "ã‚ã‹", "meaning": "red", "type": "noun"},
            {"japanese": "é’", "reading": "ã‚ãŠ", "meaning": "blue", "type": "noun"},
            {"japanese": "ç™½", "reading": "ã—ã‚", "meaning": "white", "type": "noun"},
            {"japanese": "é»’", "reading": "ãã‚", "meaning": "black", "type": "noun"},
            {"japanese": "é»„è‰²", "reading": "ãã„ã‚", "meaning": "yellow", "type": "noun"},
            {"japanese": "ç·‘", "reading": "ã¿ã©ã‚Š", "meaning": "green", "type": "noun"},

            // Objects
            {"japanese": "æœ¬", "reading": "ã»ã‚“", "meaning": "book", "type": "noun"},
            {"japanese": "ãƒšãƒ³", "reading": "ãºã‚“", "meaning": "pen", "type": "noun"},
            {"japanese": "é‰›ç­†", "reading": "ãˆã‚“ã´ã¤", "meaning": "pencil", "type": "noun"},
            {"japanese": "ç´™", "reading": "ã‹ã¿", "meaning": "paper", "type": "noun"},
            {"japanese": "æœº", "reading": "ã¤ããˆ", "meaning": "desk", "type": "noun"},
            {"japanese": "æ¤…å­", "reading": "ã„ã™", "meaning": "chair", "type": "noun"},
            {"japanese": "æ™‚è¨ˆ", "reading": "ã¨ã‘ã„", "meaning": "clock", "type": "noun"},
            {"japanese": "å‚˜", "reading": "ã‹ã•", "meaning": "umbrella", "type": "noun"},
            {"japanese": "é„", "reading": "ã‹ã°ã‚“", "meaning": "bag", "type": "noun"},
            {"japanese": "é´", "reading": "ãã¤", "meaning": "shoes", "type": "noun"},
            {"japanese": "æœ", "reading": "ãµã", "meaning": "clothes", "type": "noun"},
            {"japanese": "å¸½å­", "reading": "ã¼ã†ã—", "meaning": "hat", "type": "noun"},
            {"japanese": "çœ¼é¡", "reading": "ã‚ãŒã­", "meaning": "glasses", "type": "noun"},

            // Activities & Concepts
            {"japanese": "å‹‰å¼·", "reading": "ã¹ã‚“ãã‚‡ã†", "meaning": "study", "type": "noun"},
            {"japanese": "ä»•äº‹", "reading": "ã—ã”ã¨", "meaning": "work", "type": "noun"},
            {"japanese": "è²·ã„ç‰©", "reading": "ã‹ã„ã‚‚ã®", "meaning": "shopping", "type": "noun"},
            {"japanese": "æ–™ç†", "reading": "ã‚Šã‚‡ã†ã‚Š", "meaning": "cooking", "type": "noun"},
            {"japanese": "æƒé™¤", "reading": "ãã†ã˜", "meaning": "cleaning", "type": "noun"},
            {"japanese": "æ´—æ¿¯", "reading": "ã›ã‚“ãŸã", "meaning": "laundry", "type": "noun"},
            {"japanese": "æ—…è¡Œ", "reading": "ã‚Šã‚‡ã“ã†", "meaning": "travel", "type": "noun"},
            {"japanese": "æ•£æ­©", "reading": "ã•ã‚“ã½", "meaning": "walk", "type": "noun"},
            {"japanese": "é‹å‹•", "reading": "ã†ã‚“ã©ã†", "meaning": "exercise", "type": "noun"},
            {"japanese": "ã‚¹ãƒãƒ¼ãƒ„", "reading": "ã™ã½ãƒ¼ã¤", "meaning": "sports", "type": "noun"},
            {"japanese": "éŸ³æ¥½", "reading": "ãŠã‚“ãŒã", "meaning": "music", "type": "noun"},
            {"japanese": "æ˜ ç”»", "reading": "ãˆã„ãŒ", "meaning": "movie", "type": "noun"},
            {"japanese": "å†™çœŸ", "reading": "ã—ã‚ƒã—ã‚“", "meaning": "photograph", "type": "noun"},

            // Essential Verbs - Fixed missing verbs issue
            {"japanese": "è¡Œã", "reading": "ã„ã", "meaning": "to go", "type": "verb"},
            {"japanese": "æ¥ã‚‹", "reading": "ãã‚‹", "meaning": "to come", "type": "verb"},
            {"japanese": "å¸°ã‚‹", "reading": "ã‹ãˆã‚‹", "meaning": "to return", "type": "verb"},
            {"japanese": "é£Ÿã¹ã‚‹", "reading": "ãŸã¹ã‚‹", "meaning": "to eat", "type": "verb"},
            {"japanese": "é£²ã‚€", "reading": "ã®ã‚€", "meaning": "to drink", "type": "verb"},
            {"japanese": "è¦‹ã‚‹", "reading": "ã¿ã‚‹", "meaning": "to see", "type": "verb"},
            {"japanese": "èã", "reading": "ãã", "meaning": "to listen", "type": "verb"},
            {"japanese": "èª­ã‚€", "reading": "ã‚ˆã‚€", "meaning": "to read", "type": "verb"},
            {"japanese": "æ›¸ã", "reading": "ã‹ã", "meaning": "to write", "type": "verb"},
            {"japanese": "è©±ã™", "reading": "ã¯ãªã™", "meaning": "to speak", "type": "verb"},
            {"japanese": "å¯ã‚‹", "reading": "ã­ã‚‹", "meaning": "to sleep", "type": "verb"},
            {"japanese": "èµ·ãã‚‹", "reading": "ãŠãã‚‹", "meaning": "to wake up", "type": "verb"},
            {"japanese": "ç«‹ã¤", "reading": "ãŸã¤", "meaning": "to stand", "type": "verb"},
            {"japanese": "åº§ã‚‹", "reading": "ã™ã‚ã‚‹", "meaning": "to sit", "type": "verb"},
            {"japanese": "æ­©ã", "reading": "ã‚ã‚‹ã", "meaning": "to walk", "type": "verb"},
            {"japanese": "èµ°ã‚‹", "reading": "ã¯ã—ã‚‹", "meaning": "to run", "type": "verb"},
            {"japanese": "ä¼‘ã‚€", "reading": "ã‚„ã™ã‚€", "meaning": "to rest", "type": "verb"},
            {"japanese": "åƒã", "reading": "ã¯ãŸã‚‰ã", "meaning": "to work", "type": "verb"},
            {"japanese": "å‹‰å¼·ã™ã‚‹", "reading": "ã¹ã‚“ãã‚‡ã†ã™ã‚‹", "meaning": "to study", "type": "verb"},
            {"japanese": "è²·ã†", "reading": "ã‹ã†", "meaning": "to buy", "type": "verb"},
            {"japanese": "å£²ã‚‹", "reading": "ã†ã‚‹", "meaning": "to sell", "type": "verb"},
            {"japanese": "ä½œã‚‹", "reading": "ã¤ãã‚‹", "meaning": "to make", "type": "verb"},
            {"japanese": "æ–™ç†ã™ã‚‹", "reading": "ã‚Šã‚‡ã†ã‚Šã™ã‚‹", "meaning": "to cook", "type": "verb"},
            {"japanese": "æ´—ã†", "reading": "ã‚ã‚‰ã†", "meaning": "to wash", "type": "verb"},
            {"japanese": "æƒé™¤ã™ã‚‹", "reading": "ãã†ã˜ã™ã‚‹", "meaning": "to clean", "type": "verb"},
            {"japanese": "é–‹ã", "reading": "ã‚ã", "meaning": "to open", "type": "verb"},
            {"japanese": "é–‰ã‚ã‚‹", "reading": "ã—ã‚ã‚‹", "meaning": "to close", "type": "verb"},
            {"japanese": "å…¥ã‚‹", "reading": "ã¯ã„ã‚‹", "meaning": "to enter", "type": "verb"},
            {"japanese": "å‡ºã‚‹", "reading": "ã§ã‚‹", "meaning": "to exit", "type": "verb"},
            {"japanese": "å¾…ã¤", "reading": "ã¾ã¤", "meaning": "to wait", "type": "verb"},
            {"japanese": "æ³³ã", "reading": "ãŠã‚ˆã", "meaning": "to swim", "type": "verb"},
            {"japanese": "è¸Šã‚‹", "reading": "ãŠã©ã‚‹", "meaning": "to dance", "type": "verb"},
            {"japanese": "æ­Œã†", "reading": "ã†ãŸã†", "meaning": "to sing", "type": "verb"},
            {"japanese": "å¼¾ã", "reading": "ã²ã", "meaning": "to play (instrument)", "type": "verb"},
            {"japanese": "æ’®ã‚‹", "reading": "ã¨ã‚‹", "meaning": "to take (photo)", "type": "verb"},
            {"japanese": "ä¼šã†", "reading": "ã‚ã†", "meaning": "to meet", "type": "verb"},
            {"japanese": "æ•™ãˆã‚‹", "reading": "ãŠã—ãˆã‚‹", "meaning": "to teach", "type": "verb"},
            {"japanese": "ç¿’ã†", "reading": "ãªã‚‰ã†", "meaning": "to learn", "type": "verb"},
            {"japanese": "å€Ÿã‚Šã‚‹", "reading": "ã‹ã‚Šã‚‹", "meaning": "to borrow", "type": "verb"},
            {"japanese": "è²¸ã™", "reading": "ã‹ã™", "meaning": "to lend", "type": "verb"},
            {"japanese": "ã‚‚ã‚‰ã†", "reading": "ã‚‚ã‚‰ã†", "meaning": "to receive", "type": "verb"},
            {"japanese": "ã‚ã’ã‚‹", "reading": "ã‚ã’ã‚‹", "meaning": "to give", "type": "verb"},
            {"japanese": "æ‰‹ä¼ã†", "reading": "ã¦ã¤ã ã†", "meaning": "to help", "type": "verb"},
            {"japanese": "å¿˜ã‚Œã‚‹", "reading": "ã‚ã™ã‚Œã‚‹", "meaning": "to forget", "type": "verb"},
            {"japanese": "è¦šãˆã‚‹", "reading": "ãŠã¼ãˆã‚‹", "meaning": "to remember", "type": "verb"},
            {"japanese": "çŸ¥ã‚‹", "reading": "ã—ã‚‹", "meaning": "to know", "type": "verb"},
            {"japanese": "åˆ†ã‹ã‚‹", "reading": "ã‚ã‹ã‚‹", "meaning": "to understand", "type": "verb"},

            // i-adjectives - Fixed loading issues
            {"japanese": "æ–°ã—ã„", "reading": "ã‚ãŸã‚‰ã—ã„", "meaning": "new", "type": "i-adjective"},
            {"japanese": "å¤ã„", "reading": "ãµã‚‹ã„", "meaning": "old", "type": "i-adjective"},
            {"japanese": "å¤§ãã„", "reading": "ãŠãŠãã„", "meaning": "big", "type": "i-adjective"},
            {"japanese": "å°ã•ã„", "reading": "ã¡ã„ã•ã„", "meaning": "small", "type": "i-adjective"},
            {"japanese": "é«˜ã„", "reading": "ãŸã‹ã„", "meaning": "expensive/tall", "type": "i-adjective"},
            {"japanese": "å®‰ã„", "reading": "ã‚„ã™ã„", "meaning": "cheap", "type": "i-adjective"},
            {"japanese": "ã„ã„", "reading": "ã„ã„", "meaning": "good", "type": "i-adjective"},
            {"japanese": "è‰¯ã„", "reading": "ã‚ˆã„", "meaning": "good", "type": "i-adjective"},
            {"japanese": "æ‚ªã„", "reading": "ã‚ã‚‹ã„", "meaning": "bad", "type": "i-adjective"},
            {"japanese": "ç¾å‘³ã—ã„", "reading": "ãŠã„ã—ã„", "meaning": "delicious", "type": "i-adjective"},
            {"japanese": "ã¾ãšã„", "reading": "ã¾ãšã„", "meaning": "bad tasting", "type": "i-adjective"},
            {"japanese": "æš‘ã„", "reading": "ã‚ã¤ã„", "meaning": "hot", "type": "i-adjective"},
            {"japanese": "å¯’ã„", "reading": "ã•ã‚€ã„", "meaning": "cold", "type": "i-adjective"},
            {"japanese": "æš–ã‹ã„", "reading": "ã‚ãŸãŸã‹ã„", "meaning": "warm", "type": "i-adjective"},
            {"japanese": "æ¶¼ã—ã„", "reading": "ã™ãšã—ã„", "meaning": "cool", "type": "i-adjective"},
            {"japanese": "ç†±ã„", "reading": "ã‚ã¤ã„", "meaning": "hot (to touch)", "type": "i-adjective"},
            {"japanese": "å†·ãŸã„", "reading": "ã¤ã‚ãŸã„", "meaning": "cold (to touch)", "type": "i-adjective"},
            {"japanese": "æ˜ã‚‹ã„", "reading": "ã‚ã‹ã‚‹ã„", "meaning": "bright", "type": "i-adjective"},
            {"japanese": "æš—ã„", "reading": "ãã‚‰ã„", "meaning": "dark", "type": "i-adjective"},
            {"japanese": "é‡ã„", "reading": "ãŠã‚‚ã„", "meaning": "heavy", "type": "i-adjective"},
            {"japanese": "è»½ã„", "reading": "ã‹ã‚‹ã„", "meaning": "light", "type": "i-adjective"},
            {"japanese": "å¼·ã„", "reading": "ã¤ã‚ˆã„", "meaning": "strong", "type": "i-adjective"},
            {"japanese": "å¼±ã„", "reading": "ã‚ˆã‚ã„", "meaning": "weak", "type": "i-adjective"},
            {"japanese": "é•·ã„", "reading": "ãªãŒã„", "meaning": "long", "type": "i-adjective"},
            {"japanese": "çŸ­ã„", "reading": "ã¿ã˜ã‹ã„", "meaning": "short", "type": "i-adjective"},
            {"japanese": "åºƒã„", "reading": "ã²ã‚ã„", "meaning": "wide", "type": "i-adjective"},
            {"japanese": "ç‹­ã„", "reading": "ã›ã¾ã„", "meaning": "narrow", "type": "i-adjective"},
            {"japanese": "å¤šã„", "reading": "ãŠãŠã„", "meaning": "many", "type": "i-adjective"},
            {"japanese": "å°‘ãªã„", "reading": "ã™ããªã„", "meaning": "few", "type": "i-adjective"},
            {"japanese": "æ—©ã„", "reading": "ã¯ã‚„ã„", "meaning": "early", "type": "i-adjective"},
            {"japanese": "é…ã„", "reading": "ãŠãã„", "meaning": "late", "type": "i-adjective"},
            {"japanese": "é€Ÿã„", "reading": "ã¯ã‚„ã„", "meaning": "fast", "type": "i-adjective"},
            {"japanese": "é ã„", "reading": "ã¨ãŠã„", "meaning": "far", "type": "i-adjective"},
            {"japanese": "è¿‘ã„", "reading": "ã¡ã‹ã„", "meaning": "near", "type": "i-adjective"},
            {"japanese": "ä½ã„", "reading": "ã²ãã„", "meaning": "low", "type": "i-adjective"},
            {"japanese": "é›£ã—ã„", "reading": "ã‚€ãšã‹ã—ã„", "meaning": "difficult", "type": "i-adjective"},
            {"japanese": "æ˜“ã—ã„", "reading": "ã‚„ã•ã—ã„", "meaning": "easy", "type": "i-adjective"},
            {"japanese": "å„ªã—ã„", "reading": "ã‚„ã•ã—ã„", "meaning": "kind", "type": "i-adjective"},
            {"japanese": "é¢ç™½ã„", "reading": "ãŠã‚‚ã—ã‚ã„", "meaning": "interesting", "type": "i-adjective"},
            {"japanese": "ã¤ã¾ã‚‰ãªã„", "reading": "ã¤ã¾ã‚‰ãªã„", "meaning": "boring", "type": "i-adjective"},
            {"japanese": "æ¥½ã—ã„", "reading": "ãŸã®ã—ã„", "meaning": "fun", "type": "i-adjective"},
            {"japanese": "å¿™ã—ã„", "reading": "ã„ããŒã—ã„", "meaning": "busy", "type": "i-adjective"},
            {"japanese": "ç—›ã„", "reading": "ã„ãŸã„", "meaning": "painful", "type": "i-adjective"},
            {"japanese": "çœ ã„", "reading": "ã­ã‚€ã„", "meaning": "sleepy", "type": "i-adjective"},
            {"japanese": "æ€–ã„", "reading": "ã“ã‚ã„", "meaning": "scary", "type": "i-adjective"},
            {"japanese": "å±ãªã„", "reading": "ã‚ã¶ãªã„", "meaning": "dangerous", "type": "i-adjective"},
            {"japanese": "ã†ã‚‹ã•ã„", "reading": "ã†ã‚‹ã•ã„", "meaning": "noisy", "type": "i-adjective"},
            {"japanese": "é™ã‹ãª", "reading": "ã—ãšã‹ãª", "meaning": "quiet", "type": "i-adjective"},
            {"japanese": "è‹¥ã„", "reading": "ã‚ã‹ã„", "meaning": "young", "type": "i-adjective"},
            {"japanese": "èµ¤ã„", "reading": "ã‚ã‹ã„", "meaning": "red", "type": "i-adjective"},
            {"japanese": "é’ã„", "reading": "ã‚ãŠã„", "meaning": "blue", "type": "i-adjective"},
            {"japanese": "ç™½ã„", "reading": "ã—ã‚ã„", "meaning": "white", "type": "i-adjective"},
            {"japanese": "é»’ã„", "reading": "ãã‚ã„", "meaning": "black", "type": "i-adjective"},
            {"japanese": "é»„è‰²ã„", "reading": "ãã„ã‚ã„", "meaning": "yellow", "type": "i-adjective"},
            {"japanese": "å¯æ„›ã„", "reading": "ã‹ã‚ã„ã„", "meaning": "cute", "type": "i-adjective"},
            {"japanese": "ç¾ã—ã„", "reading": "ã†ã¤ãã—ã„", "meaning": "beautiful", "type": "i-adjective"},
            {"japanese": "æ±šã„", "reading": "ããŸãªã„", "meaning": "dirty", "type": "i-adjective"},
            {"japanese": "ç”˜ã„", "reading": "ã‚ã¾ã„", "meaning": "sweet", "type": "i-adjective"},
            {"japanese": "è¾›ã„", "reading": "ã‹ã‚‰ã„", "meaning": "spicy", "type": "i-adjective"},
            {"japanese": "é…¸ã£ã±ã„", "reading": "ã™ã£ã±ã„", "meaning": "sour", "type": "i-adjective"},
            {"japanese": "è‹¦ã„", "reading": "ã«ãŒã„", "meaning": "bitter", "type": "i-adjective"},

            // na-adjectives - Fixed loading issues
            {"japanese": "æœ‰å", "reading": "ã‚†ã†ã‚ã„", "meaning": "famous", "type": "na-adjective"},
            {"japanese": "ä¾¿åˆ©", "reading": "ã¹ã‚“ã‚Š", "meaning": "convenient", "type": "na-adjective"},
            {"japanese": "ä¸ä¾¿", "reading": "ãµã¹ã‚“", "meaning": "inconvenient", "type": "na-adjective"},
            {"japanese": "ç¶ºéº—", "reading": "ãã‚Œã„", "meaning": "beautiful/clean", "type": "na-adjective"},
            {"japanese": "é™ã‹", "reading": "ã—ãšã‹", "meaning": "quiet", "type": "na-adjective"},
            {"japanese": "è³‘ã‚„ã‹", "reading": "ã«ãã‚„ã‹", "meaning": "lively", "type": "na-adjective"},
            {"japanese": "è¦ªåˆ‡", "reading": "ã—ã‚“ã›ã¤", "meaning": "kind", "type": "na-adjective"},
            {"japanese": "ä¸å¯§", "reading": "ã¦ã„ã­ã„", "meaning": "polite", "type": "na-adjective"},
            {"japanese": "ç°¡å˜", "reading": "ã‹ã‚“ãŸã‚“", "meaning": "simple", "type": "na-adjective"},
            {"japanese": "å¤§å¤‰", "reading": "ãŸã„ã¸ã‚“", "meaning": "tough/hard", "type": "na-adjective"},
            {"japanese": "å¤§ä¸ˆå¤«", "reading": "ã ã„ã˜ã‚‡ã†ã¶", "meaning": "OK/alright", "type": "na-adjective"},
            {"japanese": "å®‰å…¨", "reading": "ã‚ã‚“ãœã‚“", "meaning": "safe", "type": "na-adjective"},
            {"japanese": "å±é™º", "reading": "ãã‘ã‚“", "meaning": "dangerous", "type": "na-adjective"},
            {"japanese": "è‡ªç”±", "reading": "ã˜ã‚†ã†", "meaning": "free", "type": "na-adjective"},
            {"japanese": "å¤§åˆ‡", "reading": "ãŸã„ã›ã¤", "meaning": "important", "type": "na-adjective"},
            {"japanese": "å¿…è¦", "reading": "ã²ã¤ã‚ˆã†", "meaning": "necessary", "type": "na-adjective"},
            {"japanese": "ç‰¹åˆ¥", "reading": "ã¨ãã¹ã¤", "meaning": "special", "type": "na-adjective"},
            {"japanese": "æ™®é€š", "reading": "ãµã¤ã†", "meaning": "normal", "type": "na-adjective"},
            {"japanese": "åŒã˜", "reading": "ãŠãªã˜", "meaning": "same", "type": "na-adjective"},
            {"japanese": "å¥½ã", "reading": "ã™ã", "meaning": "like", "type": "na-adjective"},
            {"japanese": "å«Œã„", "reading": "ãã‚‰ã„", "meaning": "dislike", "type": "na-adjective"},
            {"japanese": "ä¸Šæ‰‹", "reading": "ã˜ã‚‡ã†ãš", "meaning": "skillful", "type": "na-adjective"},
            {"japanese": "ä¸‹æ‰‹", "reading": "ã¸ãŸ", "meaning": "unskillful", "type": "na-adjective"},
            {"japanese": "å¾—æ„", "reading": "ã¨ãã„", "meaning": "good at", "type": "na-adjective"},
            {"japanese": "è‹¦æ‰‹", "reading": "ã«ãŒã¦", "meaning": "bad at", "type": "na-adjective"},
            {"japanese": "æš‡", "reading": "ã²ã¾", "meaning": "free time", "type": "na-adjective"},
            {"japanese": "æ¥½", "reading": "ã‚‰ã", "meaning": "easy/comfortable", "type": "na-adjective"},
            {"japanese": "æ–°é®®", "reading": "ã—ã‚“ã›ã‚“", "meaning": "fresh", "type": "na-adjective"},
            {"japanese": "å®Œç’§", "reading": "ã‹ã‚“ãºã", "meaning": "perfect", "type": "na-adjective"},
            {"japanese": "æœ€é«˜", "reading": "ã•ã„ã“ã†", "meaning": "the best", "type": "na-adjective"},
            {"japanese": "å¹¸ã›", "reading": "ã—ã‚ã‚ã›", "meaning": "happy", "type": "na-adjective"},
            {"japanese": "å¿ƒé…", "reading": "ã—ã‚“ã±ã„", "meaning": "worried", "type": "na-adjective"},
            {"japanese": "å®‰å¿ƒ", "reading": "ã‚ã‚“ã—ã‚“", "meaning": "relieved", "type": "na-adjective"},
            {"japanese": "æ®‹å¿µ", "reading": "ã–ã‚“ã­ã‚“", "meaning": "disappointing", "type": "na-adjective"},
            {"japanese": "ç«‹æ´¾", "reading": "ã‚Šã£ã±", "meaning": "splendid", "type": "na-adjective"},
            {"japanese": "çœŸé¢ç›®", "reading": "ã¾ã˜ã‚", "meaning": "serious", "type": "na-adjective"}
        ];

        let currentMode = 'mixed';
        let currentCardIndex = 0;
        let isFlipped = false;
        let cardsStudied = new Set();
        let flipCount = 0;
        let currentDeck = [...allFlashcards];
        let activeFilters = new Set(['all']);
        let keyboardListenerActive = true;

        // Initialize word counts by type
        const wordCounts = {
            all: 0,
            noun: 0,
            verb: 0,
            'i-adjective': 0,
            'na-adjective': 0
        };

        function calculateWordCounts() {
            wordCounts.all = allFlashcards.length;
            wordCounts.noun = allFlashcards.filter(card => card.type === 'noun').length;
            wordCounts.verb = allFlashcards.filter(card => card.type === 'verb').length;
            wordCounts['i-adjective'] = allFlashcards.filter(card => card.type === 'i-adjective').length;
            wordCounts['na-adjective'] = allFlashcards.filter(card => card.type === 'na-adjective').length;
            
            // Update count badges
            document.getElementById('allCount').textContent = wordCounts.all;
            document.getElementById('nounCount').textContent = wordCounts.noun;
            document.getElementById('verbCount').textContent = wordCounts.verb;
            document.getElementById('iAdjCount').textContent = wordCounts['i-adjective'];
            document.getElementById('naAdjCount').textContent = wordCounts['na-adjective'];
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateCard();
            updateStats();
        }

        function applyFilters() {
            let filtered = allFlashcards;

            // Apply type filters
            if (!activeFilters.has('all')) {
                filtered = filtered.filter(item => activeFilters.has(item.type));
            }

            currentDeck = filtered;
            currentCardIndex = 0;
            cardsStudied.clear();
            updateCard();
            updateStats();
        }

        // Hamburger menu functionality
        function initializeHamburgerMenu() {
            const hamburgerMenu = document.getElementById('hamburgerMenu');
            const dropdownMenu = document.getElementById('dropdownMenu');

            // Toggle dropdown
            hamburgerMenu.addEventListener('click', (e) => {
                e.stopPropagation();
                hamburgerMenu.classList.toggle('active');
                dropdownMenu.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!dropdownMenu.contains(e.target) && !hamburgerMenu.contains(e.target)) {
                    hamburgerMenu.classList.remove('active');
                    dropdownMenu.classList.remove('active');
                }
            });

            // Filter toggle switches - handle both the toggle container and checkbox
            const filterOptions = document.querySelectorAll('.filter-option');
            filterOptions.forEach(option => {
                const checkbox = option.querySelector('input[type="checkbox"]');
                const toggleSwitch = option.querySelector('.toggle-switch');
                
                // Add click handler to the entire option
                option.addEventListener('click', (e) => {
                    // Prevent double-triggering if clicking directly on checkbox
                    if (e.target !== checkbox) {
                        e.preventDefault();
                        checkbox.checked = !checkbox.checked;
                        handleFilterChange({ target: checkbox });
                    }
                });
                
                // Add direct change handler to checkbox
                checkbox.addEventListener('change', handleFilterChange);
            });
        }

        function handleFilterChange(e) {
            const checkbox = e.target;
            const filterId = checkbox.id;
            const isChecked = checkbox.checked;

            if (filterId === 'filterAll') {
                if (isChecked) {
                    // Uncheck all other filters
                    document.querySelectorAll('#dropdownMenu input[type="checkbox"]:not(#filterAll)').forEach(cb => {
                        cb.checked = false;
                    });
                    activeFilters = new Set(['all']);
                } else {
                    activeFilters.delete('all');
                }
            } else {
                // Uncheck "All Words" when selecting specific filters
                document.getElementById('filterAll').checked = false;
                activeFilters.delete('all');

                const filterMap = {
                    'filterNouns': 'noun',
                    'filterVerbs': 'verb',
                    'filterIAdj': 'i-adjective',
                    'filterNaAdj': 'na-adjective'
                };

                if (isChecked) {
                    activeFilters.add(filterMap[filterId]);
                } else {
                    activeFilters.delete(filterMap[filterId]);
                }

                // If no filters selected, check "All Words"
                if (activeFilters.size === 0) {
                    document.getElementById('filterAll').checked = true;
                    activeFilters.add('all');
                }
            }

            applyFilters();
        }

        function updateCard() {
            if (currentDeck.length === 0) {
                document.getElementById('japaneseWord').textContent = 'No cards match filters';
                document.getElementById('reading').textContent = 'Please select different filters';
                return;
            }

            const card = currentDeck[currentCardIndex];
            const promptText = document.getElementById('promptText');
            const japaneseWord = document.getElementById('japaneseWord');
            const reading = document.getElementById('reading');
            const meaning = document.getElementById('meaning');

            // Reset display
            promptText.textContent = '';
            meaning.style.display = 'none';
            japaneseWord.style.fontSize = '42px';
            isFlipped = false;
            document.getElementById('flashcard').classList.remove('flipped');

            switch (currentMode) {
                case 'mixed':
                    japaneseWord.textContent = card.japanese;
                    reading.textContent = card.reading;
                    meaning.textContent = card.meaning;
                    break;
                case 'jp-to-en':
                    japaneseWord.textContent = card.japanese;
                    reading.textContent = '';
                    meaning.textContent = card.meaning + ' (' + card.reading + ')';
                    break;
                case 'en-to-jp':
                    promptText.textContent = 'What is the Japanese for:';
                    japaneseWord.textContent = card.meaning;
                    japaneseWord.style.fontSize = '28px';
                    reading.textContent = '';
                    meaning.textContent = card.japanese + ' (' + card.reading + ')';
                    break;
                case 'reading':
                    promptText.textContent = 'What does this reading mean?';
                    japaneseWord.textContent = card.reading;
                    reading.textContent = '';
                    meaning.textContent = card.japanese + ' - ' + card.meaning;
                    break;
            }

            // Update progress
            document.getElementById('cardCounter').textContent = 
                `Card ${currentCardIndex + 1} of ${currentDeck.length}`;
            document.getElementById('progressBar').style.width = 
                ((currentCardIndex + 1) / currentDeck.length) * 100 + '%';

            cardsStudied.add(currentCardIndex);
        }

        function flipCard() {
            const meaning = document.getElementById('meaning');
            const flashcard = document.getElementById('flashcard');
            
            if (isFlipped) {
                meaning.style.display = 'none';
                flashcard.classList.remove('flipped');
            } else {
                meaning.style.display = 'block';
                flashcard.classList.add('flipped');
                flipCount++;
            }
            isFlipped = !isFlipped;
            updateStats();
        }

        function nextCard() {
            if (currentCardIndex < currentDeck.length - 1) {
                currentCardIndex++;
                updateCard();
            }
        }

        function previousCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateCard();
            }
        }

        function shuffleCards() {
            currentDeck = shuffleArray(currentDeck);
            currentCardIndex = 0;
            cardsStudied.clear();
            updateCard();
            updateStats();
        }

        function resetProgress() {
            currentCardIndex = 0;
            cardsStudied.clear();
            flipCount = 0;
            updateCard();
            updateStats();
        }

        function toggleStats() {
            document.getElementById('stats').classList.toggle('show');
        }

        function updateStats() {
            document.getElementById('cardsStudied').textContent = cardsStudied.size;
            document.getElementById('timesFlipped').textContent = flipCount;
            document.getElementById('progressPercent').textContent = 
                currentDeck.length > 0 ? Math.round((cardsStudied.size / currentDeck.length) * 100) + '%' : '0%';
            
            // Update current filter display
            let filterText = 'All words';
            if (!activeFilters.has('all')) {
                const filterNames = {
                    'noun': 'Nouns',
                    'verb': 'Verbs',
                    'i-adjective': 'ã„-Adjectives',
                    'na-adjective': 'ãª-Adjectives'
                };
                const activeFilterNames = Array.from(activeFilters).map(f => filterNames[f]).join(', ');
                filterText = activeFilterNames;
            }
            document.getElementById('currentFilter').textContent = filterText;
        }

        // Keyboard shortcuts
        function handleKeyboard(event) {
            if (!keyboardListenerActive) return;
            
            const activeElement = document.activeElement;
            const isFormElement = activeElement && (
                activeElement.tagName === 'TEXTAREA' || 
                activeElement.tagName === 'INPUT' || 
                activeElement.contentEditable === 'true' ||
                activeElement.isContentEditable
            );
            
            if (isFormElement) return;

            switch(event.key) {
                case ' ':
                case 'Enter':
                    event.preventDefault();
                    flipCard();
                    break;
                case 'ArrowLeft':
                    event.preventDefault();
                    previousCard();
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    nextCard();
                    break;
            }
        }

        document.addEventListener('keydown', handleKeyboard);

        // Feedback System Functions
        function showFeedbackForm() {
            document.getElementById('feedbackModal').style.display = 'block';
            keyboardListenerActive = false;
        }

        function hideFeedbackForm() {
            document.getElementById('feedbackModal').style.display = 'none';
            keyboardListenerActive = true;
        }

        function showDonateInfo() {
            alert('Thank you for considering a donation! This helps keep the app free and ad-free for everyone. Donation feature coming soon - for now, please share the app with others who are studying Japanese!');
        }

        function submitFeedback(event) {
            event.preventDefault();
            
            // Show success message
            document.getElementById('successMessage').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 3000);
            
            // Hide modal and re-enable keyboard
            hideFeedbackForm();
            
            // Submit the form
            const form = event.target;
            fetch('/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: new URLSearchParams(new FormData(form)).toString()
            }).catch(error => console.log('Feedback submission error:', error));
            
            // Reset form
            form.reset();
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('feedbackModal');
            if (event.target === modal) {
                hideFeedbackForm();
            }
        });

        // Local Storage for Progress Persistence
        function saveProgress() {
            const progress = {
                currentCardIndex,
                cardsStudied: Array.from(cardsStudied),
                flipCount,
                currentMode,
                activeFilters: Array.from(activeFilters),
                lastStudied: new Date().toISOString()
            };
            localStorage.setItem('jlptN5Progress', JSON.stringify(progress));
        }

        function loadProgress() {
            try {
                const saved = localStorage.getItem('jlptN5Progress');
                if (saved) {
                    const progress = JSON.parse(saved);
                    currentCardIndex = progress.currentCardIndex || 0;
                    cardsStudied = new Set(progress.cardsStudied || []);
                    flipCount = progress.flipCount || 0;
                    currentMode = progress.currentMode || 'mixed';
                    activeFilters = new Set(progress.activeFilters || ['all']);
                    
                    // Update mode button
                    document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
                    const targetBtn = document.querySelector(`[onclick*="${currentMode}"]`);
                    if (targetBtn) targetBtn.classList.add('active');
                    
                    // Update filter checkboxes
                    updateFilterCheckboxes();
                    
                    return true;
                }
            } catch (error) {
                console.log('Could not load progress:', error);
            }
            return false;
        }

        function updateFilterCheckboxes() {
            // Reset all checkboxes
            document.querySelectorAll('#dropdownMenu input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            
            if (activeFilters.has('all')) {
                document.getElementById('filterAll').checked = true;
            } else {
                const filterMap = {
                    'noun': 'filterNouns',
                    'verb': 'filterVerbs',
                    'i-adjective': 'filterIAdj',
                    'na-adjective': 'filterNaAdj'
                };
                
                activeFilters.forEach(filter => {
                    const checkboxId = filterMap[filter];
                    if (checkboxId) {
                        document.getElementById(checkboxId).checked = true;
                    }
                });
            }
        }

        // Enhanced update functions with offline save
        function updateCardWithSave() {
            updateCard();
            saveProgress();
        }

        function flipCardWithSave() {
            flipCard();
            saveProgress();
        }

        function nextCardWithSave() {
            nextCard();
            saveProgress();
        }

        function previousCardWithSave() {
            previousCard();
            saveProgress();
        }

        function setModeWithSave(mode) {
            setMode(mode);
            saveProgress();
        }

        // Service Worker for Offline Support
        if ('serviceWorker' in navigator) {
            const swContent = `
                const CACHE_NAME = 'jlpt-n5-flashcards-v2';
                const urlsToCache = [
                    '/',
                    '/index.html'
                ];

                self.addEventListener('install', function(event) {
                    event.waitUntil(
                        caches.open(CACHE_NAME)
                            .then(function(cache) {
                                return cache.addAll(urlsToCache);
                            })
                    );
                });

                self.addEventListener('fetch', function(event) {
                    event.respondWith(
                        caches.match(event.request)
                            .then(function(response) {
                                return response || fetch(event.request);
                            }
                        )
                    );
                });

                self.addEventListener('activate', function(event) {
                    event.waitUntil(
                        caches.keys().then(function(cacheNames) {
                            return Promise.all(
                                cacheNames.map(function(cacheName) {
                                    if (cacheName !== CACHE_NAME) {
                                        return caches.delete(cacheName);
                                    }
                                })
                            );
                        })
                    );
                });
            `;

            const blob = new Blob([swContent], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(blob);
            
            navigator.serviceWorker.register(swUrl)
                .then(registration => {
                    console.log('Service Worker registered for offline support');
                })
                .catch(error => {
                    console.log('Service Worker registration failed:', error);
                });
        }

        // Initialize the application
        function initializeApp() {
            calculateWordCounts();
            initializeHamburgerMenu();
            
            // Try to load previous progress
            const progressLoaded = loadProgress();
            
            if (!progressLoaded) {
                // First time - shuffle and apply default filters
                shuffleCards();
            } else {
                // Apply loaded filters
                applyFilters();
            }
            
            updateStats();
            console.log('JLPT N5 Flashcards loaded successfully with', allFlashcards.length, 'cards!');
            console.log('Word counts:', wordCounts);
        }

        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
